<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Bookmark Manager - DocumentaciÃ³ TÃ¨cnica</title>
    <style>
        @media print {
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
                font-size: 11pt;
                line-height: 1.6;
                color: #000;
                max-width: 100%;
                margin: 0;
                padding: 20px;
            }

            h1 {
                font-size: 24pt;
                margin-top: 30px;
                margin-bottom: 15px;
                page-break-after: avoid;
                border-bottom: 2px solid #000;
                padding-bottom: 10px;
            }

            h2 {
                font-size: 18pt;
                margin-top: 25px;
                margin-bottom: 12px;
                page-break-after: avoid;
            }

            h3 {
                font-size: 14pt;
                margin-top: 20px;
                margin-bottom: 10px;
                page-break-after: avoid;
            }

            h4 {
                font-size: 12pt;
                margin-top: 15px;
                margin-bottom: 8px;
                page-break-after: avoid;
            }

            pre, code {
                font-family: 'Monaco', 'Courier New', monospace;
                font-size: 9pt;
                background-color: #f6f8fa;
                border: 1px solid #d0d7de;
                border-radius: 3px;
                padding: 10px;
                overflow-x: auto;
                page-break-inside: avoid;
            }

            code {
                padding: 2px 4px;
                display: inline;
            }

            pre code {
                padding: 0;
                border: none;
                background: transparent;
            }

            table {
                border-collapse: collapse;
                width: 100%;
                margin: 15px 0;
                font-size: 10pt;
                page-break-inside: avoid;
            }

            table th, table td {
                border: 1px solid #000;
                padding: 8px;
                text-align: left;
            }

            table th {
                background-color: #f6f8fa;
                font-weight: 600;
            }

            ul, ol {
                margin: 10px 0;
                padding-left: 30px;
            }

            li {
                margin: 5px 0;
            }

            p {
                margin: 10px 0;
                text-align: justify;
            }

            a {
                color: #0969da;
                text-decoration: none;
            }

            a:after {
                content: " (" attr(href) ")";
                font-size: 8pt;
                color: #666;
            }

            blockquote {
                border-left: 4px solid #d0d7de;
                padding-left: 15px;
                margin: 15px 0;
                color: #57606a;
            }

            hr {
                border: none;
                border-top: 2px solid #d0d7de;
                margin: 30px 0;
            }

            .page-break {
                page-break-after: always;
            }

            .no-print {
                display: none;
            }

            @page {
                margin: 2cm;
                @bottom-center {
                    content: counter(page);
                }
            }
        }

        @media screen {
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
                line-height: 1.6;
                max-width: 900px;
                margin: 40px auto;
                padding: 20px;
                color: #24292f;
                background: #fff;
            }

            .print-button {
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 12px 24px;
                background: #0969da;
                color: white;
                border: none;
                border-radius: 6px;
                font-size: 14px;
                font-weight: 600;
                cursor: pointer;
                box-shadow: 0 4px 6px rgba(0,0,0,0.1);
                z-index: 1000;
            }

            .print-button:hover {
                background: #0860ca;
            }

            h1 {
                font-size: 32px;
                margin-top: 40px;
                margin-bottom: 20px;
                border-bottom: 2px solid #d0d7de;
                padding-bottom: 10px;
            }

            h2 {
                font-size: 24px;
                margin-top: 30px;
                margin-bottom: 15px;
            }

            h3 {
                font-size: 20px;
                margin-top: 25px;
                margin-bottom: 12px;
            }

            h4 {
                font-size: 16px;
                margin-top: 20px;
                margin-bottom: 10px;
            }

            pre, code {
                font-family: 'Monaco', 'Courier New', monospace;
                background-color: #f6f8fa;
                border: 1px solid #d0d7de;
                border-radius: 6px;
            }

            pre {
                padding: 16px;
                overflow-x: auto;
            }

            code {
                padding: 3px 6px;
                font-size: 85%;
            }

            pre code {
                padding: 0;
                border: none;
                background: transparent;
                font-size: 100%;
            }

            table {
                border-collapse: collapse;
                width: 100%;
                margin: 20px 0;
                font-size: 14px;
            }

            table th, table td {
                border: 1px solid #d0d7de;
                padding: 10px;
                text-align: left;
            }

            table th {
                background-color: #f6f8fa;
                font-weight: 600;
            }

            a {
                color: #0969da;
                text-decoration: none;
            }

            a:hover {
                text-decoration: underline;
            }
        }
    </style>
    <script>
        function printPDF() {
            window.print();
        }
    </script>
</head>
<body>
    <button class="print-button no-print" onclick="printPDF()">ğŸ–¨ï¸ Imprimir a PDF (âŒ˜P)</button>
<h1 id="ai-bookmark-manager---documentaciÃ³-tÃ¨cnica">AI Bookmark Manager
- DocumentaciÃ³ TÃ¨cnica</h1>
<p><strong>Data:</strong> 4 de Desembre de 2025 <strong>VersiÃ³:</strong>
1.0 <strong>Autor:</strong> Roger Masellas</p>
<hr />
<h2 id="Ã­ndex">ğŸ“‹ Ãndex</h2>
<ol type="1">
<li><a href="#descripciÃ³-del-projecte">DescripciÃ³ del Projecte</a></li>
<li><a href="#arquitectura-general">Arquitectura General</a></li>
<li><a href="#estructura-del-projecte">Estructura del Projecte</a></li>
<li><a href="#components-principals">Components Principals</a></li>
<li><a href="#flux-de-dades">Flux de Dades</a></li>
<li><a href="#sistema-de-categoritzaciÃ³-amb-ia">Sistema de
CategoritzaciÃ³ amb IA</a></li>
<li><a href="#gestiÃ³-de-duplicats">GestiÃ³ de Duplicats</a></li>
<li><a href="#sistema-de-tracking-deliminacions">Sistema de Tracking
dâ€™Eliminacions</a></li>
<li><a href="#emmagatzematge-i-sincronitzaciÃ³">Emmagatzematge i
SincronitzaciÃ³</a></li>
<li><a href="#configuraciÃ³-del-servidor-vps">ConfiguraciÃ³ del Servidor
VPS</a></li>
<li><a href="#estructures-de-dades">Estructures de Dades</a></li>
<li><a href="#caracterÃ­stiques-especials">CaracterÃ­stiques
Especials</a></li>
<li><a href="#build-i-deployment">Build i Deployment</a></li>
</ol>
<hr />
<h2 id="descripciÃ³-del-projecte">DescripciÃ³ del Projecte</h2>
<p>AI Bookmark Manager Ã©s una aplicaciÃ³ web desenvolupada inicialment
amb Google AI Studio que permet gestionar i organitzar els
bookmarks/preferits exportats des de Twitter (X). Lâ€™aplicaciÃ³ utilitza
IntelÂ·ligÃ¨ncia Artificial (Google Gemini) per analitzar, categoritzar i
titular automÃ ticament els tweets relacionats amb IA.</p>
<h3 id="objectiu-principal">Objectiu Principal</h3>
<p>Facilitar lâ€™organitzaciÃ³ de bookmarks de Twitter relacionats amb
IntelÂ·ligÃ¨ncia Artificial mitjanÃ§ant: - CategoritzaciÃ³ automÃ tica per
temÃ tiques - GeneraciÃ³ de tÃ­tols descriptius en catalÃ  - Filtrat de
contingut no relacionat amb IA - EliminaciÃ³ de duplicats -
SincronitzaciÃ³ multi-dispositiu</p>
<h3 id="funcionalitats-clau">Funcionalitats Clau</h3>
<ol type="1">
<li><strong>Import de JSON:</strong> Lectura de fitxers JSON exportats
des de Twitter</li>
<li><strong>Processament amb IA:</strong> AnÃ lisi automÃ tic amb Google
Gemini per:
<ul>
<li>Determinar si el tweet Ã©s relacionat amb IA</li>
<li>Generar un tÃ­tol descriptiu en catalÃ </li>
<li>Assignar una categoria apropiada</li>
<li>Extreure enllaÃ§os externs rellevants</li>
</ul></li>
<li><strong>Filtrat IntelÂ·ligent:</strong>
<ul>
<li>Descarta tweets no relacionats amb IA</li>
<li>Crea un fitxer descarregable amb tweets rebutjats</li>
</ul></li>
<li><strong>GestiÃ³ de Duplicats:</strong>
<ul>
<li>Detecta i evita la importaciÃ³ de tweets duplicats</li>
<li>MantÃ© un registre de tweets eliminats per evitar reimportacions</li>
</ul></li>
<li><strong>SincronitzaciÃ³ VPS:</strong>
<ul>
<li>Emmagatzema dades en un servidor VPS</li>
<li>Permet accÃ©s des de mÃºltiples dispositius</li>
<li>SincronitzaciÃ³ automÃ tica mitjanÃ§ant API REST</li>
</ul></li>
<li><strong>Sistema de Backup:</strong>
<ul>
<li>ExportaciÃ³ de totes les dades</li>
<li>ImportaciÃ³ per restaurar o fusionar dades</li>
</ul></li>
</ol>
<hr />
<h2 id="arquitectura-general">Arquitectura General</h2>
<h3 id="stack-tecnolÃ²gic">Stack TecnolÃ²gic</h3>
<h4 id="frontend">Frontend</h4>
<ul>
<li><strong>Framework:</strong> React 19.2.0</li>
<li><strong>Llenguatge:</strong> TypeScript (~5.9.3)</li>
<li><strong>Build Tool:</strong> Vite 7.2.4</li>
<li><strong>Estils:</strong> Tailwind CSS</li>
<li><strong>Icones:</strong> Lucide React</li>
<li><strong>IA:</strong> Google Generative AI SDK (<span
class="citation" data-cites="google/genai">@google/genai</span>
1.30.0)</li>
</ul>
<h4 id="backend-vps">Backend (VPS)</h4>
<ul>
<li><strong>Runtime:</strong> Node.js</li>
<li><strong>Framework:</strong> Express 4.18.2</li>
<li><strong>CORS:</strong> cors 2.8.5</li>
<li><strong>Storage:</strong> Sistema de fitxers (db.json)</li>
</ul>
<h3 id="patrÃ³-darquitectura">PatrÃ³ dâ€™Arquitectura</h3>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Frontend (React)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   App.tsx    â”‚  â”‚ UI Componentsâ”‚  â”‚  Services    â”‚  â”‚
â”‚  â”‚  (Control)   â”‚â†’ â”‚  (Brutalist) â”‚  â”‚  - Gemini    â”‚  â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚  - Storage   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†•
                    (API REST / localStorage)
                            â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Backend VPS (Express)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  server.js (Port 3002)                           â”‚   â”‚
â”‚  â”‚  - Auth Middleware (x-api-secret)                â”‚   â”‚
â”‚  â”‚  - CRUD Endpoints                                â”‚   â”‚
â”‚  â”‚  - db.json (File Storage)                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<h3 id="principis-de-disseny">Principis de Disseny</h3>
<ol type="1">
<li><strong>Component-Based:</strong> Arquitectura modular amb
components reutilitzables</li>
<li><strong>Separation of Concerns:</strong> SeparaciÃ³ clara entre UI,
lÃ²gica de negoci i serveis</li>
<li><strong>Functional Programming:</strong> Ãšs extensiu de React Hooks
i programaciÃ³ funcional</li>
<li><strong>Type Safety:</strong> TypeScript per prevenir errors en
temps de desenvolupament</li>
<li><strong>Storage Agnostic:</strong> AbstracciÃ³ del sistema
dâ€™emmagatzematge (local/remot)</li>
</ol>
<hr />
<h2 id="estructura-del-projecte">Estructura del Projecte</h2>
<h3 id="arbre-de-directoris">Arbre de Directoris</h3>
<pre><code>ai-bookmarks/
â”œâ”€â”€ public/              # Assets pÃºblics
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â””â”€â”€ UI.tsx      # Components UI reutilitzables (brutalista)
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ geminiService.ts   # IntegraciÃ³ amb Gemini AI
â”‚   â”‚   â””â”€â”€ storage.ts         # Capa d&#39;abstracciÃ³ d&#39;emmagatzematge
â”‚   â”œâ”€â”€ App.tsx         # Component principal (890 lÃ­nies)
â”‚   â”œâ”€â”€ main.tsx        # Punt d&#39;entrada React
â”‚   â”œâ”€â”€ types.ts        # Definicions TypeScript
â”‚   â”œâ”€â”€ translations.ts # Strings UI i prompts IA (catalÃ )
â”‚   â”œâ”€â”€ index.css       # Tailwind + CSS custom
â”‚   â””â”€â”€ vite-env.d.ts   # Types variables d&#39;entorn
â”œâ”€â”€ .env                # ConfiguraciÃ³ (API keys, VPS URL)
â”œâ”€â”€ index.html          # HTML d&#39;entrada
â”œâ”€â”€ package.json        # Dependencies i scripts
â”œâ”€â”€ vite.config.ts      # ConfiguraciÃ³ Vite
â”œâ”€â”€ tsconfig.json       # ConfiguraciÃ³ TypeScript
â””â”€â”€ eslint.config.js    # ConfiguraciÃ³ ESLint</code></pre>
<h3 id="fitxers-de-configuraciÃ³">Fitxers de ConfiguraciÃ³</h3>
<h4 id="env">.env</h4>
<pre class="env"><code>VITE_API_KEY=AIzaSyCtn6WyoYxBYAOPoijSWnPZ8v0FyBWx5fU
VITE_STORAGE_API_URL=http://62.169.25.188:3002
VITE_STORAGE_SECRET=aAgYYud97Kp29Lif9u0i</code></pre>
<h4 id="vite.config.ts">vite.config.ts</h4>
<ul>
<li>Servidor dev: port 3000, host 0.0.0.0</li>
<li>Plugin React amb Fast Refresh</li>
<li>CÃ rrega de variables dâ€™entorn</li>
</ul>
<h4 id="package.json---scripts">package.json - Scripts</h4>
<div class="sourceCode" id="cb4"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;dev&quot;</span><span class="fu">:</span> <span class="st">&quot;vite&quot;</span><span class="fu">,</span>          <span class="er">//</span> <span class="er">Inicia</span> <span class="er">servidor</span> <span class="er">desenvolupament</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;build&quot;</span><span class="fu">:</span> <span class="st">&quot;tsc &amp;&amp; vite build&quot;</span><span class="fu">,</span>  <span class="er">//</span> <span class="er">Compila</span> <span class="er">TypeScript</span> <span class="er">+</span> <span class="er">build</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;lint&quot;</span><span class="fu">:</span> <span class="st">&quot;eslint .&quot;</span><span class="fu">,</span>     <span class="er">//</span> <span class="er">Verifica</span> <span class="er">codi</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;preview&quot;</span><span class="fu">:</span> <span class="st">&quot;vite preview&quot;</span>  <span class="er">//</span> <span class="er">Preview</span> <span class="er">build</span> <span class="er">producciÃ³</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<hr />
<h2 id="components-principals">Components Principals</h2>
<h3 id="app.tsx---component-principal-890-lÃ­nies">1. App.tsx - Component
Principal (890 lÃ­nies)</h3>
<p><strong>Responsabilitats:</strong> - GestiÃ³ centralitzada dâ€™estat -
OrquestraciÃ³ de la UI (layout, modals, navegaciÃ³) - LÃ²gica
dâ€™import/export de dades - Processament de tweets amb Gemini - Sistema
de logging i progrÃ©s</p>
<p><strong>Estat Principal:</strong></p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Dades</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>bookmarks<span class="op">:</span> Bookmark[]           <span class="co">// Tots els bookmarks processats</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>categories<span class="op">:</span> Category[]          <span class="co">// Llista de categories</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>deletedIds<span class="op">:</span> <span class="dt">string</span>[]           <span class="co">// Blacklist d&#39;IDs eliminats</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co">// UI State</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>isLoading<span class="op">:</span> <span class="dt">boolean</span>             <span class="co">// Indica processament actiu</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>selectedCategory<span class="op">:</span> <span class="dt">string</span>       <span class="co">// Categoria filtrada visualment</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>showMobileMenu<span class="op">:</span> <span class="dt">boolean</span>        <span class="co">// Control menÃº mÃ²bil</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>showLogs<span class="op">:</span> <span class="dt">boolean</span>             <span class="co">// Mostra consola de logs</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="co">// Processament</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>progress<span class="op">:</span> { current<span class="op">:</span> <span class="dt">number</span><span class="op">,</span> total<span class="op">:</span> <span class="dt">number</span> }  <span class="co">// ProgrÃ©s IA</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>logs<span class="op">:</span> LogEntry[]              <span class="co">// Registre del procÃ©s d&#39;import</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>rejectedTweets<span class="op">:</span> TweetRaw[]    <span class="co">// Tweets no-IA per exportar</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="co">// Modals</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>editModalState<span class="op">:</span> { bookmark<span class="op">,</span> show }   <span class="co">// EdiciÃ³ bookmark</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>deleteModalState<span class="op">:</span> { id<span class="op">,</span> originalId<span class="op">,</span> show }  <span class="co">// ConfirmaciÃ³ eliminaciÃ³</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>resultsModalState<span class="op">:</span> { added<span class="op">,</span> skipped<span class="op">,</span> rejected<span class="op">,</span> show }  <span class="co">// Resum import</span></span></code></pre></div>
<p><strong>Funcions Clau:</strong></p>
<ol type="1">
<li><strong>handleFileUpload()</strong>
<ul>
<li>Llegeix fitxer JSON pujat per lâ€™usuari</li>
<li>Detecta tipus: backup propi o export de Twitter</li>
<li>Crida processTweetsData() o mergeix backup</li>
</ul></li>
<li><strong>processTweetsData()</strong>
<ul>
<li>Extreu tweets del JSON de Twitter</li>
<li>Deduplica contra bookmarks existents i deletedIds</li>
<li>Crida processBookmarksWithGemini()</li>
</ul></li>
<li><strong>processBookmarksWithGemini()</strong>
<ul>
<li>Processa tweets amb Gemini (1 a 1)</li>
<li>Gestiona rate limiting (4s entre requests)</li>
<li>Retry amb exponential backoff en errors 429</li>
<li>Separa tweets IA vs no-IA</li>
<li>Actualitza progress i logs en temps real</li>
</ul></li>
<li><strong>confirmDelete()</strong>
<ul>
<li>Elimina bookmark de lâ€™estat</li>
<li>Afegeix ID a deletedIds (blacklist)</li>
<li>Persisteix canvis a storage</li>
</ul></li>
<li><strong>exportBackupJSON()</strong>
<ul>
<li>Genera JSON amb bookmarks, categories, deletedIds</li>
<li>Inclou metadata (versiÃ³, timestamp)</li>
<li>Descarrega com a fitxer</li>
</ul></li>
</ol>
<h3 id="geminiservice.ts---integraciÃ³-ia">2. geminiService.ts -
IntegraciÃ³ IA</h3>
<p><strong>ConfiguraciÃ³:</strong></p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> model <span class="op">=</span> genAI<span class="op">.</span><span class="fu">getGenerativeModel</span>({</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  model<span class="op">:</span> <span class="st">&quot;gemini-2.0-flash-exp&quot;</span><span class="op">,</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  generationConfig<span class="op">:</span> {</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    responseMimeType<span class="op">:</span> <span class="st">&quot;application/json&quot;</span><span class="op">,</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    responseSchema<span class="op">:</span> ProcessedTweetResultSchema<span class="op">,</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    maxOutputTokens<span class="op">:</span> <span class="dv">500</span>  <span class="co">// Prevenir loops infinits</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<p><strong>Funcions:</strong></p>
<ol type="1">
<li><strong>processBookmarksWithGemini(tweets, onProgress,
onLog)</strong>
<ul>
<li>Batch processing: itera tweets 1 a 1</li>
<li>Trunca text a 1000 chars per request</li>
<li>Crida generateContent() amb system instruction</li>
<li>Retry logic amb exponential backoff</li>
<li>Retorna arrays separats: AI tweets i rejected tweets</li>
</ul></li>
<li><strong>handleRateLimitWithRetry()</strong>
<ul>
<li>Detecta errors 429 (rate limit)</li>
<li>Exponential backoff: 10s â†’ 15s â†’ 22.5s â†’ â€¦ â†’ 60s max</li>
<li>MÃ xim 10 intents</li>
<li>Logs detallats de cada retry</li>
</ul></li>
</ol>
<p><strong>Schema de Resposta:</strong></p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  type<span class="op">:</span> <span class="st">&quot;ARRAY&quot;</span><span class="op">,</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  items<span class="op">:</span> {</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    type<span class="op">:</span> <span class="st">&quot;OBJECT&quot;</span><span class="op">,</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    properties<span class="op">:</span> {</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>      originalId<span class="op">:</span> STRING<span class="op">,</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>      isAI<span class="op">:</span> BOOLEAN<span class="op">,</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>      title<span class="op">:</span> STRING<span class="op">,</span>        <span class="co">// CatalÃ </span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>      description<span class="op">:</span> STRING<span class="op">,</span>  <span class="co">// No utilitzat</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>      category<span class="op">:</span> STRING<span class="op">,</span>     <span class="co">// De llista predefinida</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>      externalLinks<span class="op">:</span> ARRAY<span class="op">&lt;</span>STRING<span class="op">&gt;</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="storage.ts---abstracciÃ³-demmagatzematge">3. storage.ts -
AbstracciÃ³ dâ€™Emmagatzematge</h3>
<p><strong>EstratÃ¨gia Dual:</strong></p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> USE_API <span class="op">=</span> <span class="op">!!</span>import<span class="op">.</span><span class="at">meta</span><span class="op">.</span><span class="at">env</span><span class="op">.</span><span class="at">VITE_STORAGE_SECRET</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co">// Si existeix VITE_STORAGE_SECRET â†’ API</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co">// Altrament â†’ localStorage</span></span></code></pre></div>
<p><strong>API Wrapper:</strong></p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span> <span class="fu">apiRequest</span><span class="op">&lt;</span>T<span class="op">&gt;</span>(endpoint<span class="op">,</span> method<span class="op">,</span> data<span class="op">?</span>) {</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> response <span class="op">=</span> <span class="cf">await</span> <span class="fu">fetch</span>(<span class="vs">`</span><span class="sc">${</span>API_URL<span class="sc">}</span><span class="vs">/</span><span class="sc">${</span>endpoint<span class="sc">}</span><span class="vs">`</span><span class="op">,</span> {</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    method<span class="op">,</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    headers<span class="op">:</span> {</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>      <span class="st">&#39;Content-Type&#39;</span><span class="op">:</span> <span class="st">&#39;application/json&#39;</span><span class="op">,</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>      <span class="st">&#39;x-api-secret&#39;</span><span class="op">:</span> API_SECRET  <span class="co">// AutenticaciÃ³</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    body<span class="op">:</span> data <span class="op">?</span> <span class="bu">JSON</span><span class="op">.</span><span class="fu">stringify</span>(data) <span class="op">:</span> <span class="dt">undefined</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="op">!</span>response<span class="op">.</span><span class="at">ok</span>) <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(<span class="vs">`API error: </span><span class="sc">${</span>response<span class="op">.</span><span class="at">status</span><span class="sc">}</span><span class="vs">`</span>)</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> result <span class="op">=</span> <span class="cf">await</span> response<span class="op">.</span><span class="fu">json</span>()</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> result<span class="op">.</span><span class="at">data</span>  <span class="co">// Desembolicar { data: [...] }</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><strong>Funcions CRUD:</strong> - <code>loadBookmarks()</code> /
<code>saveBookmarks(data)</code> - <code>loadCategories()</code> /
<code>saveCategories(data)</code> - <code>loadDeletedIds()</code> /
<code>saveDeletedIds(data)</code> - <code>resetStorage()</code> -
Esborra tot</p>
<p><strong>LocalStorage Keys:</strong> - <code>ai-bookmarks-data</code>
- <code>ai-bookmarks-categories</code> -
<code>ai-bookmarks-deleted-ids</code></p>
<h3 id="ui.tsx---sistema-de-disseny-brutalista">4. UI.tsx - Sistema de
Disseny Brutalista</h3>
<p><strong>Components Disponibles:</strong></p>
<ol type="1">
<li><strong>Button</strong>
<ul>
<li>Variants: primary, secondary, danger, ghost</li>
<li>Estats: hover, active (translate + shadow)</li>
<li>Suport per icons (Lucide)</li>
</ul></li>
<li><strong>Card</strong>
<ul>
<li>Border gruixut negre (border-2)</li>
<li>Shadow hard: shadow-[4px_4px_0px_0px_#000]</li>
<li>Hover effect: translate + augment shadow</li>
</ul></li>
<li><strong>Input / TextArea</strong>
<ul>
<li>Border gruixut amb focus state</li>
<li>Padding generÃ³s</li>
<li>Tipografia bold</li>
</ul></li>
<li><strong>Select</strong>
<ul>
<li>Estilitzat custom (brutalist)</li>
<li>Dropdown consistent amb disseny</li>
</ul></li>
<li><strong>Badge</strong>
<ul>
<li>Etiquetes de categoria</li>
<li>Colors dâ€™accent (groc #ffc107)</li>
<li>Text bold</li>
</ul></li>
<li><strong>Modal</strong>
<ul>
<li>Overlay amb backdrop blur</li>
<li>Animacions slide-in</li>
<li>Sistema de close button</li>
<li>Scroll independent del body</li>
</ul></li>
</ol>
<p><strong>EstÃ¨tica Brutalista:</strong></p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode css"><code class="sourceCode css"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* CaracterÃ­stiques clau */</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>border<span class="in">:</span> 2px solid black</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>box-shadow<span class="in">:</span> 4px 4px 0px 0px <span class="pp">#000</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>font-weight<span class="in">:</span> 800 <span class="in">(</span>font-black<span class="in">)</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>colors<span class="in">:</span> <span class="pp">#000</span> <span class="in">(</span>black<span class="in">)</span><span class="op">,</span> <span class="pp">#fff</span> <span class="in">(</span>white<span class="in">)</span><span class="op">,</span> <span class="pp">#ffc107</span> <span class="in">(</span>yellow<span class="in">)</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="co">/* Efectes interactius */</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>hover<span class="in">:</span> translate<span class="in">(</span>-2px<span class="op">,</span> -2px<span class="in">)</span> <span class="op">+</span> shadow-<span class="ex">[</span><span class="ss">6px_6px_0px_0px_</span><span class="pp">#000</span>]</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>active<span class="in">:</span> translate<span class="in">(</span>0<span class="op">,</span> 0<span class="in">)</span> <span class="op">+</span> shadow-<span class="ex">[</span><span class="ss">0px_0px_0px_0px_</span><span class="pp">#000</span>]</span></code></pre></div>
<hr />
<h2 id="flux-de-dades">Flux de Dades</h2>
<h3 id="flux-dimportaciÃ³-complert">1. Flux dâ€™ImportaciÃ³ Complert</h3>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. USER UPLOAD JSON                                       â”‚
â”‚    - Twitter export o backup propi                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. handleFileUpload()                                     â”‚
â”‚    - Detecta tipus de fitxer                              â”‚
â”‚    - Valida estructura JSON                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                       â”‚
    [Backup]               [Twitter Export]
         â”‚                       â”‚
         â†“                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Merge Backup   â”‚    â”‚ processTweetsData()  â”‚
â”‚ - Categories   â”‚    â”‚ - Extreu tweets      â”‚
â”‚ - Bookmarks    â”‚    â”‚ - Parse entities     â”‚
â”‚ - DeletedIds   â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â†“
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚ 3. DEDUPLICACIÃ“              â”‚
                     â”‚ - Filter IDs existents       â”‚
                     â”‚ - Filter deletedIds          â”‚
                     â”‚ - Count skipped              â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â†“
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚ 4. processBookmarksWithGeminiâ”‚
                     â”‚ FOR EACH tweet:              â”‚
                     â”‚   - Truncate 1000 chars      â”‚
                     â”‚   - Call Gemini API          â”‚
                     â”‚   - Wait 4s (rate limit)     â”‚
                     â”‚   - Retry if 429 error       â”‚
                     â”‚   - Parse JSON response      â”‚
                     â”‚   - Update progress          â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â†“
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚ 5. SEPARACIÃ“ AI vs NO-AI     â”‚
                     â”‚ IF isAI = true:              â”‚
                     â”‚   â†’ Create Bookmark          â”‚
                     â”‚ IF isAI = false:             â”‚
                     â”‚   â†’ Add to rejectedTweets    â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â†“
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚ 6. CREATE BOOKMARK OBJECTS   â”‚
                     â”‚ - Generate unique ID         â”‚
                     â”‚ - Truncate desc (280 chars)  â”‚
                     â”‚ - Extract metadata           â”‚
                     â”‚ - Assign category            â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â†“
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚ 7. UPDATE STATE &amp; STORAGE    â”‚
                     â”‚ - setBookmarks([...new])     â”‚
                     â”‚ - setCategories([...union])  â”‚
                     â”‚ - saveBookmarks()            â”‚
                     â”‚ - saveCategories()           â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â†“
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚ 8. SHOW RESULTS              â”‚
                     â”‚ - Modal amb estadÃ­stiques    â”‚
                     â”‚ - OpciÃ³ download rejected    â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<h3 id="flux-de-visualitzaciÃ³">2. Flux de VisualitzaciÃ³</h3>
<pre><code>STATE (bookmarks, categories, selectedCategory)
              â†“
        useMemo() Filtra per categoria
              â†“
        Grid Layout (responsive)
              â†“
    BookmarkCard per cada bookmark
              â†“
    Render: Badge + Title + Description + Links + Actions</code></pre>
<h3 id="flux-deliminaciÃ³">3. Flux dâ€™EliminaciÃ³</h3>
<pre><code>Click Delete Button
        â†“
Show Delete Modal (warning)
        â†“
User Confirms
        â†“
confirmDelete()
  - Remove from bookmarks array
  - Add originalId to deletedIds
  - saveBookmarks()
  - saveDeletedIds()
        â†“
Re-render UI (card desapareix)</code></pre>
<hr />
<h2 id="sistema-de-categoritzaciÃ³-amb-ia">Sistema de CategoritzaciÃ³ amb
IA</h2>
<h3 id="prompt-del-sistema-translations.ts89-104">Prompt del Sistema
(translations.ts:89-104)</h3>
<pre><code>Ets un assistent que analitza tweets i determina si estan
relacionats amb IntelÂ·ligÃ¨ncia Artificial.

REGLES ESTRICTES:
1. Si el tweet NO tracta sobre IA/ML/LLM/Data Science:
   - Posa isAI: false
   - Deixa title, description, category, externalLinks buits

2. Si el tweet SÃ tracta sobre IA:
   - Posa isAI: true
   - Genera un TÃTOL CURT I DESCRIPTIU en CATALÃ€
   - NO generar description (s&#39;usarÃ  el text original)
   - Assigna UNA categoria de la llista
   - Extreu enllaÃ§os externs (NO twitter.com/x.com)

CATEGORIES DISPONIBLES:
- DivulgaciÃ³: Contingut educatiu, explicacions, guies
- Agents: Sistemes d&#39;agents autÃ²noms, multi-agent
- Skills: Capacitats, funcions, eines especÃ­fiques
- RAG: Retrieval Augmented Generation, embeddings
- Cursos: FormaciÃ³, tutorials estructurats
- NotÃ­cies: Actualitat, anuncis, releases
- Eines: Software, APIs, frameworks, aplicacions
- Altres: Altres temes relacionats amb IA

MOLT IMPORTANT:
- El tÃ­tol ha de ser FINAL, sense explicacions ni raonament
- Sigues estricte: nomÃ©s marca isAI=true si Ã©s clarament IA
- NO inventar informaciÃ³ que no estigui al tweet</code></pre>
<h3 id="model-i-configuraciÃ³">Model i ConfiguraciÃ³</h3>
<p><strong>Model:</strong> Gemini 2.0 Flash Experimental - RÃ pid i
econÃ²mic (ideal per batch processing) - Suporta JSON schema enforced -
15 RPM en tier gratuÃ¯t</p>
<p><strong>GenerationConfig:</strong></p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  responseMimeType<span class="op">:</span> <span class="st">&quot;application/json&quot;</span><span class="op">,</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  responseSchema<span class="op">:</span> ProcessedTweetResultSchema<span class="op">,</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  maxOutputTokens<span class="op">:</span> <span class="dv">500</span>  <span class="co">// Prevenir loops infinits</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="esquema-de-validaciÃ³">Esquema de ValidaciÃ³</h3>
<div class="sourceCode" id="cb16"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> ProcessedTweetResultSchema <span class="op">=</span> {</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  type<span class="op">:</span> SchemaType<span class="op">.</span><span class="at">ARRAY</span><span class="op">,</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  items<span class="op">:</span> {</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    type<span class="op">:</span> SchemaType<span class="op">.</span><span class="at">OBJECT</span><span class="op">,</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    properties<span class="op">:</span> {</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>      originalId<span class="op">:</span> {</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>        type<span class="op">:</span> SchemaType<span class="op">.</span><span class="at">STRING</span><span class="op">,</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>        description<span class="op">:</span> <span class="st">&quot;ID original del tweet&quot;</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>      isAI<span class="op">:</span> {</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>        type<span class="op">:</span> SchemaType<span class="op">.</span><span class="at">BOOLEAN</span><span class="op">,</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>        description<span class="op">:</span> <span class="st">&quot;true si relacionat amb IA, false si no&quot;</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>      title<span class="op">:</span> {</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>        type<span class="op">:</span> SchemaType<span class="op">.</span><span class="at">STRING</span><span class="op">,</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>        description<span class="op">:</span> <span class="st">&quot;TÃ­tol curt en CATALÃ€ (buit si isAI=false)&quot;</span></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>      description<span class="op">:</span> {</span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>        type<span class="op">:</span> SchemaType<span class="op">.</span><span class="at">STRING</span><span class="op">,</span></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>        description<span class="op">:</span> <span class="st">&quot;NO GENERAR, deixar buit sempre&quot;</span></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>      category<span class="op">:</span> {</span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>        type<span class="op">:</span> SchemaType<span class="op">.</span><span class="at">STRING</span><span class="op">,</span></span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>        description<span class="op">:</span> <span class="st">&quot;Categoria assignada (buit si isAI=false)&quot;</span><span class="op">,</span></span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a>        enum<span class="op">:</span> [</span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;DivulgaciÃ³&quot;</span><span class="op">,</span> <span class="st">&quot;Agents&quot;</span><span class="op">,</span> <span class="st">&quot;Skills&quot;</span><span class="op">,</span> <span class="st">&quot;RAG&quot;</span><span class="op">,</span></span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot;Cursos&quot;</span><span class="op">,</span> <span class="st">&quot;NotÃ­cies&quot;</span><span class="op">,</span> <span class="st">&quot;Eines&quot;</span><span class="op">,</span> <span class="st">&quot;Altres&quot;</span></span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a>        ]</span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a>      }<span class="op">,</span></span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a>      externalLinks<span class="op">:</span> {</span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a>        type<span class="op">:</span> SchemaType<span class="op">.</span><span class="at">ARRAY</span><span class="op">,</span></span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a>        items<span class="op">:</span> { type<span class="op">:</span> SchemaType<span class="op">.</span><span class="at">STRING</span> }<span class="op">,</span></span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a>        description<span class="op">:</span> <span class="st">&quot;URLs externs mencionats&quot;</span></span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb16-35"><a href="#cb16-35" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb16-36"><a href="#cb16-36" aria-hidden="true" tabindex="-1"></a>    required<span class="op">:</span> [<span class="st">&quot;originalId&quot;</span><span class="op">,</span> <span class="st">&quot;isAI&quot;</span><span class="op">,</span> <span class="st">&quot;title&quot;</span><span class="op">,</span> <span class="st">&quot;category&quot;</span><span class="op">,</span> <span class="st">&quot;externalLinks&quot;</span>]</span>
<span id="cb16-37"><a href="#cb16-37" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb16-38"><a href="#cb16-38" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="categories-predefinides">Categories Predefinides</h3>
<table>
<colgroup>
<col style="width: 13%" />
<col style="width: 49%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr>
<th>Categoria</th>
<th>DescripciÃ³</th>
<th>Exemples</th>
</tr>
</thead>
<tbody>
<tr>
<td>DivulgaciÃ³</td>
<td>Contingut educatiu i explicatiu</td>
<td>Articles, threads explicatius</td>
</tr>
<tr>
<td>Agents</td>
<td>Sistemes dâ€™agents autÃ²noms</td>
<td>AutoGPT, BabyAGI, multi-agents</td>
</tr>
<tr>
<td>Skills</td>
<td>Capacitats i funcions especÃ­fiques</td>
<td>Function calling, tool use</td>
</tr>
<tr>
<td>RAG</td>
<td>Retrieval Augmented Generation</td>
<td>Vector DBs, embeddings, context</td>
</tr>
<tr>
<td>Cursos</td>
<td>FormaciÃ³ estructurada</td>
<td>MOOCs, tutorials, workshops</td>
</tr>
<tr>
<td>NotÃ­cies</td>
<td>Actualitat i anuncis</td>
<td>Product launches, research papers</td>
</tr>
<tr>
<td>Eines</td>
<td>Software i frameworks</td>
<td>LangChain, LlamaIndex, APIs</td>
</tr>
<tr>
<td>Altres</td>
<td>Altres temes dâ€™IA</td>
<td>Fallback per contingut ambigu</td>
</tr>
</tbody>
</table>
<h3 id="exemples-de-categoritzaciÃ³">Exemples de CategoritzaciÃ³</h3>
<p><strong>Exemple 1 - Tweet sobre IA (isAI: true):</strong></p>
<pre><code>Input: &quot;New paper from OpenAI on improving RAG with
        hierarchical indexing https://arxiv.org/...&quot;

Output:
{
  originalId: &quot;1234567890&quot;,
  isAI: true,
  title: &quot;Nou paper d&#39;OpenAI sobre millora de RAG amb indexaciÃ³ jerÃ rquica&quot;,
  description: &quot;&quot;,
  category: &quot;RAG&quot;,
  externalLinks: [&quot;https://arxiv.org/...&quot;]
}</code></pre>
<p><strong>Exemple 2 - Tweet NO IA (isAI: false):</strong></p>
<pre><code>Input: &quot;Just had the best pizza in Naples! ğŸ•&quot;

Output:
{
  originalId: &quot;0987654321&quot;,
  isAI: false,
  title: &quot;&quot;,
  description: &quot;&quot;,
  category: &quot;&quot;,
  externalLinks: []
}</code></pre>
<hr />
<h2 id="gestiÃ³-de-duplicats">GestiÃ³ de Duplicats</h2>
<h3 id="estratÃ¨gia-de-deduplicaciÃ³">EstratÃ¨gia de DeduplicaciÃ³</h3>
<p><strong>Objectiu:</strong> Evitar processar tweets ja existents o
eliminats prÃ¨viament</p>
<p><strong>ImplementaciÃ³ (App.tsx:246-259):</strong></p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">processTweetsData</span>(tweetsData<span class="op">:</span> TweetRaw[]) {</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">// 1. Extreure IDs de bookmarks existents</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> existingIds <span class="op">=</span> <span class="kw">new</span> <span class="bu">Set</span>(</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    bookmarks<span class="op">.</span><span class="fu">map</span>(b <span class="kw">=&gt;</span> {</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> parts <span class="op">=</span> b<span class="op">.</span><span class="at">originalLink</span><span class="op">.</span><span class="fu">split</span>(<span class="st">&#39;/&#39;</span>)</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> parts[parts<span class="op">.</span><span class="at">length</span> <span class="op">-</span> <span class="dv">1</span>]  <span class="co">// Ãšltim segment = tweet ID</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>  <span class="co">// 2. Crear Set amb IDs eliminats (blacklist)</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> blacklistIds <span class="op">=</span> <span class="kw">new</span> <span class="bu">Set</span>(deletedIds)</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>  <span class="co">// 3. Filtrar tweets duplicats o eliminats</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> uniqueTweets <span class="op">=</span> tweetsData<span class="op">.</span><span class="fu">filter</span>(t <span class="kw">=&gt;</span> {</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> tweetId <span class="op">=</span> t<span class="op">.</span><span class="at">id_str</span> <span class="op">||</span> t<span class="op">.</span><span class="at">id</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">!</span>existingIds<span class="op">.</span><span class="fu">has</span>(tweetId) <span class="op">&amp;&amp;</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>           <span class="op">!</span>blacklistIds<span class="op">.</span><span class="fu">has</span>(tweetId)</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>  <span class="co">// 4. Comptar skipped per logging</span></span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> skippedCount <span class="op">=</span> tweetsData<span class="op">.</span><span class="at">length</span> <span class="op">-</span> uniqueTweets<span class="op">.</span><span class="at">length</span></span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addLog</span>(<span class="st">&#39;info&#39;</span><span class="op">,</span> <span class="vs">`</span><span class="sc">${</span>uniqueTweets<span class="op">.</span><span class="at">length</span><span class="sc">}</span><span class="vs"> tweets nous (</span><span class="sc">${</span>skippedCount<span class="sc">}</span><span class="vs"> duplicats ignorats)`</span>)</span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>  <span class="co">// 5. Processar nomÃ©s tweets Ãºnics</span></span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>  <span class="cf">await</span> <span class="fu">processBookmarksWithGemini</span>(uniqueTweets<span class="op">,</span> <span class="op">...</span>)</span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="flux-de-deduplicaciÃ³">Flux de DeduplicaciÃ³</h3>
<pre><code>IMPORT JSON (1000 tweets)
        â†“
Extract tweet IDs â†’ [id1, id2, id3, ...]
        â†“
Check against existing bookmarks (50 matches)
        â†“
Check against deletedIds blacklist (10 matches)
        â†“
RESULT: 940 tweets Ãºnics a processar
        â†“
Log: &quot;940 tweets nous (60 duplicats ignorats)&quot;</code></pre>
<h3 id="format-dids">Format dâ€™IDs</h3>
<p><strong>Twitter/X Tweet ID:</strong> - Format: String numÃ¨ric de 19
dÃ­gits - Exemple: â€œ1862103456789012345â€ - Origen:
<code>tweet.id_str</code> o <code>tweet.id</code> - URL:
<code>https://twitter.com/i/web/status/1862103456789012345</code></p>
<p><strong>Bookmark ID (intern):</strong> - Format:
<code>{tweetId}-{randomString}</code> - Exemple:
â€œ1862103456789012345-a7b3c9â€ - GeneraciÃ³:
<code>${originalId}-${Math.random().toString(36).substr(2, 6)}</code> -
PropÃ²sit: Clau Ãºnica per React keys i ediciÃ³</p>
<h3 id="casos-especials">Casos Especials</h3>
<ol type="1">
<li><strong>Mateix tweet en mÃºltiples imports:</strong>
<ul>
<li>Primera vegada: Processat i guardat</li>
<li>SegÃ¼ents vegades: Detectat com duplicat, ignorat</li>
</ul></li>
<li><strong>Tweet eliminat i tornat a importar:</strong>
<ul>
<li>Estat: <code>deletedIds.includes(tweetId) === true</code></li>
<li>AcciÃ³: Ignorat automÃ ticament</li>
<li>Logging: Comptat com â€œduplicat ignoratâ€</li>
</ul></li>
<li><strong>Backup merge:</strong>
<ul>
<li>Els IDs del backup tambÃ© es comproven</li>
<li>NomÃ©s sâ€™afegeixen bookmarks nous</li>
<li>Categories es fusionen (uniÃ³ de sets)</li>
</ul></li>
</ol>
<hr />
<h2 id="sistema-de-tracking-deliminacions">Sistema de Tracking
dâ€™Eliminacions</h2>
<h3 id="objectiu">Objectiu</h3>
<p>Crear una â€œblacklistâ€ persistent dâ€™IDs de tweets eliminats per
lâ€™usuari, evitant que es tornin a importar en futurs uploads de JSON que
continguin aquests tweets.</p>
<h3 id="implementaciÃ³">ImplementaciÃ³</h3>
<p><strong>Estructura de Dades:</strong></p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>deletedIds<span class="op">:</span> <span class="dt">string</span>[]  <span class="co">// Array d&#39;IDs de tweets eliminats</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="co">// Exemple:</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>[</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;1862103456789012345&quot;</span><span class="op">,</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;1862104567890123456&quot;</span><span class="op">,</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;1862105678901234567&quot;</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>]</span></code></pre></div>
<p><strong>Flux dâ€™EliminaciÃ³ (App.tsx:447-453):</strong></p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> confirmDelete <span class="op">=</span> <span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> { id<span class="op">,</span> originalId } <span class="op">=</span> deleteModalState</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">// 1. Eliminar bookmark de l&#39;array</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setBookmarks</span>(prev <span class="kw">=&gt;</span> prev<span class="op">.</span><span class="fu">filter</span>(b <span class="kw">=&gt;</span> b<span class="op">.</span><span class="at">id</span> <span class="op">!==</span> id))</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>  <span class="co">// 2. Afegir originalId a blacklist</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (originalId) {</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">setDeletedIds</span>(prev <span class="kw">=&gt;</span> [<span class="op">...</span>prev<span class="op">,</span> originalId])</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>  <span class="co">// 3. Tancar modal</span></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setDeleteModalState</span>({ id<span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span> originalId<span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span> show<span class="op">:</span> <span class="kw">false</span> })</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><strong>Efecte de PersistÃ¨ncia:</strong></p>
<div class="sourceCode" id="cb23"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">useEffect</span>(() <span class="kw">=&gt;</span> {</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (deletedIds<span class="op">.</span><span class="at">length</span> <span class="op">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">saveDeletedIds</span>(deletedIds)  <span class="co">// Guarda a storage (API o localStorage)</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>}<span class="op">,</span> [deletedIds])</span></code></pre></div>
<h3 id="modal-dadvertÃ¨ncia">Modal dâ€™AdvertÃ¨ncia</h3>
<p>Quan lâ€™usuari clica el botÃ³ de delete, apareix un modal amb:</p>
<pre><code>ATENCIÃ“: Aquesta acciÃ³ Ã©s permanent

Si elimines aquest bookmark:
- DesapareixerÃ  de la teva llista
- NO es tornarÃ  a importar en futurs uploads
- L&#39;ID quedarÃ  a la blacklist per sempre

EstÃ s segur que vols eliminar-lo?

[CancelÂ·lar]  [Eliminar]</code></pre>
<h3 id="sincronitzaciÃ³-multi-dispositiu">SincronitzaciÃ³
Multi-Dispositiu</h3>
<p><strong>Escenari:</strong> Usuari amb 2 dispositius (ordinador +
mÃ²bil)</p>
<ol type="1">
<li><strong>Dispositiu A:</strong> Elimina tweet X
<ul>
<li><code>deletedIds</code> sâ€™actualitza localment</li>
<li>POST <code>/deleted</code> â†’ VPS guarda blacklist actualitzada</li>
</ul></li>
<li><strong>Dispositiu B:</strong> Carrega app
<ul>
<li>GET <code>/deleted</code> â†’ Descarrega blacklist del VPS</li>
<li>TÃ© la blacklist sincronitzada amb dispositiu A</li>
</ul></li>
<li><strong>Dispositiu B:</strong> Import JSON amb tweet X
<ul>
<li>DeduplicaciÃ³ detecta X a <code>deletedIds</code></li>
<li>Tweet X no es processa ni es mostra</li>
</ul></li>
</ol>
<h3 id="persistÃ¨ncia">PersistÃ¨ncia</h3>
<p><strong>LocalStorage:</strong></p>
<div class="sourceCode" id="cb25"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>Key<span class="op">:</span> <span class="st">&quot;ai-bookmarks-deleted-ids&quot;</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>Value<span class="op">:</span> [<span class="st">&quot;1862103456789012345&quot;</span><span class="op">,</span> <span class="st">&quot;1862104567890123456&quot;</span><span class="op">,</span> <span class="op">...</span>]</span></code></pre></div>
<p><strong>VPS (db.json):</strong></p>
<div class="sourceCode" id="cb26"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;bookmarks&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="er">...</span><span class="ot">]</span><span class="fu">,</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;categories&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="er">...</span><span class="ot">]</span><span class="fu">,</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;deletedIds&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;1862103456789012345&quot;</span><span class="ot">,</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;1862104567890123456&quot;</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Backup Export:</strong></p>
<div class="sourceCode" id="cb27"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;backupVersion&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;timestamp&quot;</span><span class="fu">:</span> <span class="dv">1733328000000</span><span class="fu">,</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;bookmarks&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="er">...</span><span class="ot">]</span><span class="fu">,</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;categories&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="er">...</span><span class="ot">]</span><span class="fu">,</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;deletedIds&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;1862103456789012345&quot;</span><span class="ot">,</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;1862104567890123456&quot;</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 id="limitacions-i-consideracions">Limitacions i Consideracions</h3>
<ol type="1">
<li><strong>No hi ha â€œundoâ€:</strong>
<ul>
<li>Un cop eliminat, no es pot recuperar des de la UI</li>
<li>SoluciÃ³: Restaurar des dâ€™un backup anterior</li>
</ul></li>
<li><strong>Creixement de blacklist:</strong>
<ul>
<li>La llista pot crÃ©ixer indefinidament</li>
<li>Possible millora futura: System de garbage collection</li>
</ul></li>
<li><strong>Reset manual:</strong>
<ul>
<li>Endpoint <code>/reset</code> esborra tot (incloent deletedIds)</li>
<li>Usar amb precauciÃ³</li>
</ul></li>
</ol>
<hr />
<h2 id="emmagatzematge-i-sincronitzaciÃ³">Emmagatzematge i
SincronitzaciÃ³</h2>
<h3 id="arquitectura-demmagatzematge">Arquitectura dâ€™Emmagatzematge</h3>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         storage.ts (Abstraction Layer)     â”‚
â”‚                                            â”‚
â”‚  const USE_API = !!VITE_STORAGE_SECRET     â”‚
â”‚            â†“                     â†“         â”‚
â”‚      [API Mode]           [Local Mode]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“                         â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  VPS   â”‚              â”‚ localStorage â”‚
    â”‚  API   â”‚              â”‚  (Browser)   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<h3 id="mode-local-localstorage">Mode Local (localStorage)</h3>
<p><strong>Quan sâ€™activa:</strong> - <code>VITE_STORAGE_SECRET</code> no
estÃ  definit al .env - Navegador suporta localStorage</p>
<p><strong>ImplementaciÃ³:</strong></p>
<div class="sourceCode" id="cb29"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">saveBookmarks</span>(data<span class="op">:</span> Bookmark[]) {</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  localStorage<span class="op">.</span><span class="fu">setItem</span>(</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;ai-bookmarks-data&#39;</span><span class="op">,</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">JSON</span><span class="op">.</span><span class="fu">stringify</span>(data)</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">loadBookmarks</span>()<span class="op">:</span> Bookmark[] {</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> stored <span class="op">=</span> localStorage<span class="op">.</span><span class="fu">getItem</span>(<span class="st">&#39;ai-bookmarks-data&#39;</span>)</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> stored <span class="op">?</span> <span class="bu">JSON</span><span class="op">.</span><span class="fu">parse</span>(stored) <span class="op">:</span> []</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><strong>Avantatges:</strong> - Funciona offline - Sense latÃ¨ncia -
Sense cost servidor</p>
<p><strong>Desavantatges:</strong> - NomÃ©s accessible des del mateix
navegador - LÃ­mit de ~10MB - Pot ser esborrat per lâ€™usuari</p>
<h3 id="mode-api-vps">Mode API (VPS)</h3>
<p><strong>Quan sâ€™activa:</strong> - <code>VITE_STORAGE_SECRET</code>
estÃ  definit al .env</p>
<p><strong>ConfiguraciÃ³:</strong></p>
<div class="sourceCode" id="cb30"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> API_URL <span class="op">=</span> import<span class="op">.</span><span class="at">meta</span><span class="op">.</span><span class="at">env</span><span class="op">.</span><span class="at">VITE_STORAGE_API_URL</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> API_SECRET <span class="op">=</span> import<span class="op">.</span><span class="at">meta</span><span class="op">.</span><span class="at">env</span><span class="op">.</span><span class="at">VITE_STORAGE_SECRET</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="co">// Exemple:</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="co">// API_URL = &quot;http://62.169.25.188:3002&quot;</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="co">// API_SECRET = &quot;aAgYYud97Kp29Lif9u0i&quot;</span></span></code></pre></div>
<p><strong>Endpoints:</strong></p>
<table>
<thead>
<tr>
<th>Endpoint</th>
<th>MÃ¨tode</th>
<th>DescripciÃ³</th>
<th>Auth</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/bookmarks</code></td>
<td>GET</td>
<td>ObtÃ© tots els bookmarks</td>
<td>âœ“</td>
</tr>
<tr>
<td><code>/bookmarks</code></td>
<td>POST</td>
<td>Guarda array de bookmarks</td>
<td>âœ“</td>
</tr>
<tr>
<td><code>/categories</code></td>
<td>GET</td>
<td>ObtÃ© llista de categories</td>
<td>âœ“</td>
</tr>
<tr>
<td><code>/categories</code></td>
<td>POST</td>
<td>Guarda array de categories</td>
<td>âœ“</td>
</tr>
<tr>
<td><code>/deleted</code></td>
<td>GET</td>
<td>ObtÃ© IDs eliminats</td>
<td>âœ“</td>
</tr>
<tr>
<td><code>/deleted</code></td>
<td>POST</td>
<td>Guarda array dâ€™IDs eliminats</td>
<td>âœ“</td>
</tr>
<tr>
<td><code>/reset</code></td>
<td>POST</td>
<td>Esborra totes les dades</td>
<td>âœ“</td>
</tr>
</tbody>
</table>
<p><strong>Format Request:</strong></p>
<pre class="http"><code>POST /bookmarks HTTP/1.1
Host: 62.169.25.188:3002
Content-Type: application/json
x-api-secret: aAgYYud97Kp29Lif9u0i

{
  &quot;data&quot;: [
    { &quot;id&quot;: &quot;...&quot;, &quot;title&quot;: &quot;...&quot;, ... },
    { &quot;id&quot;: &quot;...&quot;, &quot;title&quot;: &quot;...&quot;, ... }
  ]
}</code></pre>
<p><strong>Format Response:</strong></p>
<div class="sourceCode" id="cb32"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;data&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span> <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;...&quot;</span><span class="fu">,</span> <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;...&quot;</span><span class="fu">,</span> <span class="er">...</span> <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span> <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;...&quot;</span><span class="fu">,</span> <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;...&quot;</span><span class="fu">,</span> <span class="er">...</span> <span class="fu">}</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>GestiÃ³ dâ€™Errors:</strong></p>
<div class="sourceCode" id="cb33"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span> <span class="fu">apiRequest</span><span class="op">&lt;</span>T<span class="op">&gt;</span>(endpoint<span class="op">,</span> method<span class="op">,</span> data<span class="op">?</span>) {</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">try</span> {</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> response <span class="op">=</span> <span class="cf">await</span> <span class="fu">fetch</span>(<span class="op">...</span>)</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="op">!</span>response<span class="op">.</span><span class="at">ok</span>) {</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>      <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(<span class="vs">`API error: </span><span class="sc">${</span>response<span class="op">.</span><span class="at">status</span><span class="sc">}</span><span class="vs">`</span>)</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> result <span class="op">=</span> <span class="cf">await</span> response<span class="op">.</span><span class="fu">json</span>()</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result<span class="op">.</span><span class="at">data</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">catch</span> (error) {</span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">error</span>(<span class="vs">`Failed to </span><span class="sc">${</span>method<span class="sc">}</span><span class="vs"> </span><span class="sc">${</span>endpoint<span class="sc">}</span><span class="vs">:`</span><span class="op">,</span> error)</span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">throw</span> error</span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><strong>Avantatges:</strong> - SincronitzaciÃ³ multi-dispositiu -
Backup automÃ tic al servidor - No depÃ¨n del navegador</p>
<p><strong>Desavantatges:</strong> - Requereix connexiÃ³ a internet -
LatÃ¨ncia de xarxa - Cost de servidor VPS</p>
<h3 id="sistema-dautenticaciÃ³">Sistema dâ€™AutenticaciÃ³</h3>
<p><strong>MÃ¨tode:</strong> Custom secret header</p>
<pre class="http"><code>x-api-secret: aAgYYud97Kp29Lif9u0i</code></pre>
<p><strong>ValidaciÃ³ (server.js):</strong></p>
<div class="sourceCode" id="cb35"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> checkAuth <span class="op">=</span> (req<span class="op">,</span> res<span class="op">,</span> next) <span class="kw">=&gt;</span> {</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> secret <span class="op">=</span> req<span class="op">.</span><span class="at">headers</span>[<span class="st">&#39;x-api-secret&#39;</span>]</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (secret <span class="op">!==</span> API_SECRET) {</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> res<span class="op">.</span><span class="fu">status</span>(<span class="dv">403</span>)<span class="op">.</span><span class="fu">json</span>({ <span class="dt">error</span><span class="op">:</span> <span class="st">&#39;Unauthorized&#39;</span> })</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">next</span>()</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>app<span class="op">.</span><span class="fu">use</span>(checkAuth)  <span class="co">// Aplicat a tots els endpoints</span></span></code></pre></div>
<p><strong>Seguretat:</strong> - âš ï¸ Secret compartit simple (no JWT) -
âš ï¸ HTTP sense HTTPS (dades en clar) - âœ… Suficient per Ãºs personal - âŒ
NO adequat per producciÃ³ pÃºblica</p>
<p><strong>Millores Recomanades (futur):</strong> - Migrar a HTTPS -
Implementar JWT amb refresh tokens - Rate limiting per IP - Hashing de
secrets</p>
<h3 id="race-conditions">Race Conditions</h3>
<p><strong>Problema Potencial:</strong> Dos dispositius actualitzen
simultÃ niament:</p>
<pre><code>Temps    | Dispositiu A          | Dispositiu B
---------|----------------------|----------------------
T0       | GET /bookmarks       | GET /bookmarks
         | â†’ [b1, b2, b3]       | â†’ [b1, b2, b3]
T1       | Afegir b4            | Afegir b5
T2       | POST [b1,b2,b3,b4]   | POST [b1,b2,b3,b5]
T3       | âœ… Guardat           | âœ… Guardat (SOBREESCRIU)
Result   | b4 ES PERD!          | NomÃ©s b5 queda</code></pre>
<p><strong>SoluciÃ³ Actual:</strong> - Ãšltima escriptura guanya
(last-write-wins) - Acceptable per Ãºs personal amb 1 usuari</p>
<p><strong>Millores Futures:</strong> - Timestamps per detectar
conflictes - Merge automÃ tic basat en IDs Ãºnics - Versionat optimista
(etags) - WebSockets per sync en temps real</p>
<hr />
<h2 id="configuraciÃ³-del-servidor-vps">ConfiguraciÃ³ del Servidor
VPS</h2>
<h3 id="fitxers-del-servidor">Fitxers del Servidor</h3>
<p><strong>UbicaciÃ³:</strong> <code>/root/ai-bookmarks-backend/</code>
(o similar al VPS)</p>
<p><strong>1. server.js</strong></p>
<div class="sourceCode" id="cb37"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> express <span class="op">=</span> <span class="pp">require</span>(<span class="st">&#39;express&#39;</span>)</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> cors <span class="op">=</span> <span class="pp">require</span>(<span class="st">&#39;cors&#39;</span>)</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> fs <span class="op">=</span> <span class="pp">require</span>(<span class="st">&#39;fs&#39;</span>)</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> path <span class="op">=</span> <span class="pp">require</span>(<span class="st">&#39;path&#39;</span>)</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> app <span class="op">=</span> <span class="fu">express</span>()</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> PORT <span class="op">=</span> <span class="dv">3002</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> DB_FILE <span class="op">=</span> path<span class="op">.</span><span class="fu">join</span>(<span class="bu">__dirname</span><span class="op">,</span> <span class="st">&#39;db.json&#39;</span>)</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> API_SECRET <span class="op">=</span> <span class="st">&#39;aAgYYud97Kp29Lif9u0i&#39;</span></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a><span class="co">// Middleware</span></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>app<span class="op">.</span><span class="fu">use</span>(<span class="fu">cors</span>())  <span class="co">// Permet requests des de qualsevol origen</span></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>app<span class="op">.</span><span class="fu">use</span>(express<span class="op">.</span><span class="fu">json</span>({ <span class="dt">limit</span><span class="op">:</span> <span class="st">&#39;50mb&#39;</span> }))  <span class="co">// Parse JSON + lÃ­mit gran</span></span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a><span class="co">// Auth Middleware</span></span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> checkAuth <span class="op">=</span> (req<span class="op">,</span> res<span class="op">,</span> next) <span class="kw">=&gt;</span> {</span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> secret <span class="op">=</span> req<span class="op">.</span><span class="at">headers</span>[<span class="st">&#39;x-api-secret&#39;</span>]</span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (secret <span class="op">!==</span> API_SECRET) {</span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> res<span class="op">.</span><span class="fu">status</span>(<span class="dv">403</span>)<span class="op">.</span><span class="fu">json</span>({ <span class="dt">error</span><span class="op">:</span> <span class="st">&#39;Unauthorized&#39;</span> })</span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb37-21"><a href="#cb37-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">next</span>()</span>
<span id="cb37-22"><a href="#cb37-22" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb37-23"><a href="#cb37-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-24"><a href="#cb37-24" aria-hidden="true" tabindex="-1"></a>app<span class="op">.</span><span class="fu">use</span>(checkAuth)</span>
<span id="cb37-25"><a href="#cb37-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-26"><a href="#cb37-26" aria-hidden="true" tabindex="-1"></a><span class="co">// Helper functions</span></span>
<span id="cb37-27"><a href="#cb37-27" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> readDB <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb37-28"><a href="#cb37-28" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="op">!</span>fs<span class="op">.</span><span class="fu">existsSync</span>(DB_FILE)) {</span>
<span id="cb37-29"><a href="#cb37-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> { <span class="dt">bookmarks</span><span class="op">:</span> []<span class="op">,</span> <span class="dt">categories</span><span class="op">:</span> []<span class="op">,</span> <span class="dt">deletedIds</span><span class="op">:</span> [] }</span>
<span id="cb37-30"><a href="#cb37-30" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb37-31"><a href="#cb37-31" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="bu">JSON</span><span class="op">.</span><span class="fu">parse</span>(fs<span class="op">.</span><span class="fu">readFileSync</span>(DB_FILE<span class="op">,</span> <span class="st">&#39;utf8&#39;</span>))</span>
<span id="cb37-32"><a href="#cb37-32" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb37-33"><a href="#cb37-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-34"><a href="#cb37-34" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> writeDB <span class="op">=</span> (data) <span class="kw">=&gt;</span> {</span>
<span id="cb37-35"><a href="#cb37-35" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> current <span class="op">=</span> <span class="fu">readDB</span>()</span>
<span id="cb37-36"><a href="#cb37-36" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> newData <span class="op">=</span> { <span class="op">...</span>current<span class="op">,</span> <span class="op">...</span>data }</span>
<span id="cb37-37"><a href="#cb37-37" aria-hidden="true" tabindex="-1"></a>  fs<span class="op">.</span><span class="fu">writeFileSync</span>(DB_FILE<span class="op">,</span> <span class="bu">JSON</span><span class="op">.</span><span class="fu">stringify</span>(newData<span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="dv">2</span>))</span>
<span id="cb37-38"><a href="#cb37-38" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb37-39"><a href="#cb37-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-40"><a href="#cb37-40" aria-hidden="true" tabindex="-1"></a><span class="co">// Endpoints</span></span>
<span id="cb37-41"><a href="#cb37-41" aria-hidden="true" tabindex="-1"></a>app<span class="op">.</span><span class="fu">get</span>(<span class="st">&#39;/bookmarks&#39;</span><span class="op">,</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb37-42"><a href="#cb37-42" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> db <span class="op">=</span> <span class="fu">readDB</span>()</span>
<span id="cb37-43"><a href="#cb37-43" aria-hidden="true" tabindex="-1"></a>  res<span class="op">.</span><span class="fu">json</span>({ <span class="dt">data</span><span class="op">:</span> db<span class="op">.</span><span class="at">bookmarks</span> <span class="op">||</span> [] })</span>
<span id="cb37-44"><a href="#cb37-44" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb37-45"><a href="#cb37-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-46"><a href="#cb37-46" aria-hidden="true" tabindex="-1"></a>app<span class="op">.</span><span class="fu">post</span>(<span class="st">&#39;/bookmarks&#39;</span><span class="op">,</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb37-47"><a href="#cb37-47" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> { data } <span class="op">=</span> req<span class="op">.</span><span class="at">body</span></span>
<span id="cb37-48"><a href="#cb37-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">writeDB</span>({ <span class="dt">bookmarks</span><span class="op">:</span> data })</span>
<span id="cb37-49"><a href="#cb37-49" aria-hidden="true" tabindex="-1"></a>  res<span class="op">.</span><span class="fu">json</span>({ <span class="dt">success</span><span class="op">:</span> <span class="kw">true</span> })</span>
<span id="cb37-50"><a href="#cb37-50" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb37-51"><a href="#cb37-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-52"><a href="#cb37-52" aria-hidden="true" tabindex="-1"></a>app<span class="op">.</span><span class="fu">get</span>(<span class="st">&#39;/categories&#39;</span><span class="op">,</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb37-53"><a href="#cb37-53" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> db <span class="op">=</span> <span class="fu">readDB</span>()</span>
<span id="cb37-54"><a href="#cb37-54" aria-hidden="true" tabindex="-1"></a>  res<span class="op">.</span><span class="fu">json</span>({ <span class="dt">data</span><span class="op">:</span> db<span class="op">.</span><span class="at">categories</span> <span class="op">||</span> [] })</span>
<span id="cb37-55"><a href="#cb37-55" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb37-56"><a href="#cb37-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-57"><a href="#cb37-57" aria-hidden="true" tabindex="-1"></a>app<span class="op">.</span><span class="fu">post</span>(<span class="st">&#39;/categories&#39;</span><span class="op">,</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb37-58"><a href="#cb37-58" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> { data } <span class="op">=</span> req<span class="op">.</span><span class="at">body</span></span>
<span id="cb37-59"><a href="#cb37-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">writeDB</span>({ <span class="dt">categories</span><span class="op">:</span> data })</span>
<span id="cb37-60"><a href="#cb37-60" aria-hidden="true" tabindex="-1"></a>  res<span class="op">.</span><span class="fu">json</span>({ <span class="dt">success</span><span class="op">:</span> <span class="kw">true</span> })</span>
<span id="cb37-61"><a href="#cb37-61" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb37-62"><a href="#cb37-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-63"><a href="#cb37-63" aria-hidden="true" tabindex="-1"></a>app<span class="op">.</span><span class="fu">get</span>(<span class="st">&#39;/deleted&#39;</span><span class="op">,</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb37-64"><a href="#cb37-64" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> db <span class="op">=</span> <span class="fu">readDB</span>()</span>
<span id="cb37-65"><a href="#cb37-65" aria-hidden="true" tabindex="-1"></a>  res<span class="op">.</span><span class="fu">json</span>({ <span class="dt">data</span><span class="op">:</span> db<span class="op">.</span><span class="at">deletedIds</span> <span class="op">||</span> [] })</span>
<span id="cb37-66"><a href="#cb37-66" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb37-67"><a href="#cb37-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-68"><a href="#cb37-68" aria-hidden="true" tabindex="-1"></a>app<span class="op">.</span><span class="fu">post</span>(<span class="st">&#39;/deleted&#39;</span><span class="op">,</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb37-69"><a href="#cb37-69" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> { data } <span class="op">=</span> req<span class="op">.</span><span class="at">body</span></span>
<span id="cb37-70"><a href="#cb37-70" aria-hidden="true" tabindex="-1"></a>  <span class="fu">writeDB</span>({ <span class="dt">deletedIds</span><span class="op">:</span> data })</span>
<span id="cb37-71"><a href="#cb37-71" aria-hidden="true" tabindex="-1"></a>  res<span class="op">.</span><span class="fu">json</span>({ <span class="dt">success</span><span class="op">:</span> <span class="kw">true</span> })</span>
<span id="cb37-72"><a href="#cb37-72" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb37-73"><a href="#cb37-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-74"><a href="#cb37-74" aria-hidden="true" tabindex="-1"></a>app<span class="op">.</span><span class="fu">post</span>(<span class="st">&#39;/reset&#39;</span><span class="op">,</span> (req<span class="op">,</span> res) <span class="kw">=&gt;</span> {</span>
<span id="cb37-75"><a href="#cb37-75" aria-hidden="true" tabindex="-1"></a>  fs<span class="op">.</span><span class="fu">writeFileSync</span>(</span>
<span id="cb37-76"><a href="#cb37-76" aria-hidden="true" tabindex="-1"></a>    DB_FILE<span class="op">,</span></span>
<span id="cb37-77"><a href="#cb37-77" aria-hidden="true" tabindex="-1"></a>    <span class="bu">JSON</span><span class="op">.</span><span class="fu">stringify</span>({</span>
<span id="cb37-78"><a href="#cb37-78" aria-hidden="true" tabindex="-1"></a>      <span class="dt">bookmarks</span><span class="op">:</span> []<span class="op">,</span></span>
<span id="cb37-79"><a href="#cb37-79" aria-hidden="true" tabindex="-1"></a>      <span class="dt">categories</span><span class="op">:</span> []<span class="op">,</span></span>
<span id="cb37-80"><a href="#cb37-80" aria-hidden="true" tabindex="-1"></a>      <span class="dt">deletedIds</span><span class="op">:</span> []</span>
<span id="cb37-81"><a href="#cb37-81" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb37-82"><a href="#cb37-82" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb37-83"><a href="#cb37-83" aria-hidden="true" tabindex="-1"></a>  res<span class="op">.</span><span class="fu">json</span>({ <span class="dt">success</span><span class="op">:</span> <span class="kw">true</span> })</span>
<span id="cb37-84"><a href="#cb37-84" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb37-85"><a href="#cb37-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-86"><a href="#cb37-86" aria-hidden="true" tabindex="-1"></a>app<span class="op">.</span><span class="fu">listen</span>(PORT<span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb37-87"><a href="#cb37-87" aria-hidden="true" tabindex="-1"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="vs">`Server running on port </span><span class="sc">${</span>PORT<span class="sc">}</span><span class="vs">`</span>)</span>
<span id="cb37-88"><a href="#cb37-88" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<p><strong>2. package.json</strong></p>
<div class="sourceCode" id="cb38"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;ai-bookmarks-backend&quot;</span><span class="fu">,</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;version&quot;</span><span class="fu">:</span> <span class="st">&quot;1.0.0&quot;</span><span class="fu">,</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;main&quot;</span><span class="fu">:</span> <span class="st">&quot;server.js&quot;</span><span class="fu">,</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;scripts&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;start&quot;</span><span class="fu">:</span> <span class="st">&quot;node server.js&quot;</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;dependencies&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;cors&quot;</span><span class="fu">:</span> <span class="st">&quot;^2.8.5&quot;</span><span class="fu">,</span></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;express&quot;</span><span class="fu">:</span> <span class="st">&quot;^4.18.2&quot;</span></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>3. db.json</strong> (generat automÃ ticament)</p>
<div class="sourceCode" id="cb39"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;bookmarks&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;1862103456789012345-a7b3c9&quot;</span><span class="fu">,</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Guia completa sobre RAG amb LlamaIndex&quot;</span><span class="fu">,</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;AprÃ¨n a implementar...&quot;</span><span class="fu">,</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;author&quot;</span><span class="fu">:</span> <span class="st">&quot;@username&quot;</span><span class="fu">,</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;originalLink&quot;</span><span class="fu">:</span> <span class="st">&quot;https://twitter.com/i/web/status/1862103456789012345&quot;</span><span class="fu">,</span></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;externalLinks&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;https://llamaindex.ai/...&quot;</span><span class="ot">]</span><span class="fu">,</span></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;category&quot;</span><span class="fu">:</span> <span class="st">&quot;RAG&quot;</span><span class="fu">,</span></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;createdAt&quot;</span><span class="fu">:</span> <span class="dv">1733328000000</span></span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;categories&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;DivulgaciÃ³&quot;</span><span class="ot">,</span></span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Agents&quot;</span><span class="ot">,</span></span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Skills&quot;</span><span class="ot">,</span></span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;RAG&quot;</span><span class="ot">,</span></span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Cursos&quot;</span><span class="ot">,</span></span>
<span id="cb39-20"><a href="#cb39-20" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;NotÃ­cies&quot;</span><span class="ot">,</span></span>
<span id="cb39-21"><a href="#cb39-21" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Eines&quot;</span><span class="ot">,</span></span>
<span id="cb39-22"><a href="#cb39-22" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Altres&quot;</span></span>
<span id="cb39-23"><a href="#cb39-23" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb39-24"><a href="#cb39-24" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;deletedIds&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb39-25"><a href="#cb39-25" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;1862104567890123456&quot;</span></span>
<span id="cb39-26"><a href="#cb39-26" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb39-27"><a href="#cb39-27" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 id="installaciÃ³-i-deploy">InstalÂ·laciÃ³ i Deploy</h3>
<p><strong>1. InstalÂ·lar Node.js al VPS:</strong></p>
<div class="sourceCode" id="cb40"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ubuntu/Debian</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-fsSL</span> https://deb.nodesource.com/setup_20.x <span class="kw">|</span> <span class="fu">sudo</span> <span class="at">-E</span> bash <span class="at">-</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt-get install <span class="at">-y</span> nodejs</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Verificar</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="ex">node</span> <span class="at">--version</span>  <span class="co"># v20.x.x</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> <span class="at">--version</span>   <span class="co"># 10.x.x</span></span></code></pre></div>
<p><strong>2. Crear directori i pujar fitxers:</strong></p>
<div class="sourceCode" id="cb41"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> <span class="at">-p</span> /root/ai-bookmarks-backend</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /root/ai-bookmarks-backend</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Pujar server.js i package.json via SCP/FTP</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="co"># O crear manualment amb nano/vim</span></span></code></pre></div>
<p><strong>3. InstalÂ·lar dependÃ¨ncies:</strong></p>
<div class="sourceCode" id="cb42"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> install</span></code></pre></div>
<p><strong>4. Executar servidor:</strong></p>
<div class="sourceCode" id="cb43"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Directe (per testing)</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> start</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Amb PM2 (recomanat per producciÃ³)</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> install <span class="at">-g</span> pm2</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a><span class="ex">pm2</span> start server.js <span class="at">--name</span> ai-bookmarks</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a><span class="ex">pm2</span> save</span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a><span class="ex">pm2</span> startup  <span class="co"># Configura autostart</span></span></code></pre></div>
<p><strong>5. Configurar firewall:</strong></p>
<div class="sourceCode" id="cb44"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># UFW (Ubuntu)</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ufw allow 3002/tcp</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ufw reload</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="co"># iptables</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> iptables <span class="at">-A</span> INPUT <span class="at">-p</span> tcp <span class="at">--dport</span> 3002 <span class="at">-j</span> ACCEPT</span></code></pre></div>
<p><strong>6. (Opcional) Nginx reverse proxy:</strong></p>
<pre class="nginx"><code># /etc/nginx/sites-available/ai-bookmarks
server {
    listen 80;
    server_name bookmarks.example.com;

    location / {
        proxy_pass http://localhost:3002;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection &#39;upgrade&#39;;
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}</code></pre>
<h3 id="gestiÃ³-del-servidor">GestiÃ³ del Servidor</h3>
<p><strong>Comandes PM2:</strong></p>
<div class="sourceCode" id="cb46"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pm2</span> status              <span class="co"># Veure estat</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="ex">pm2</span> logs ai-bookmarks   <span class="co"># Veure logs</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="ex">pm2</span> restart ai-bookmarks  <span class="co"># Reiniciar</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="ex">pm2</span> stop ai-bookmarks   <span class="co"># Aturar</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a><span class="ex">pm2</span> delete ai-bookmarks <span class="co"># Eliminar</span></span></code></pre></div>
<p><strong>Backup de db.json:</strong></p>
<div class="sourceCode" id="cb47"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Backup manual</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> db.json db.json.backup</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Backup automÃ tic diari</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="fu">crontab</span> <span class="at">-e</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Afegir: 0 2 * * * cp /root/ai-bookmarks-backend/db.json /root/backups/db-$(date +\%Y\%m\%d).json</span></span></code></pre></div>
<p><strong>MonitoritzaciÃ³:</strong></p>
<div class="sourceCode" id="cb48"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Logs en temps real</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="ex">pm2</span> logs ai-bookmarks <span class="at">--lines</span> 100</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="co"># MÃ¨trics</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="ex">pm2</span> monit</span></code></pre></div>
<h3 id="detalls-de-xarxa">Detalls de Xarxa</h3>
<p><strong>IP Servidor:</strong> 62.169.25.188 <strong>Port:</strong>
3002 <strong>Protocol:</strong> HTTP (no HTTPS) <strong>CORS:</strong>
Obert a tots els orÃ­gens (*)</p>
<p><strong>URL Completa:</strong>
<code>http://62.169.25.188:3002</code></p>
<p><strong>Testing endpoint:</strong></p>
<div class="sourceCode" id="cb49"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># GET bookmarks</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-H</span> <span class="st">&quot;x-api-secret: aAgYYud97Kp29Lif9u0i&quot;</span> <span class="dt">\</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>     http://62.169.25.188:3002/bookmarks</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a><span class="co"># POST bookmark</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-X</span> POST <span class="dt">\</span></span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>     <span class="at">-H</span> <span class="st">&quot;Content-Type: application/json&quot;</span> <span class="dt">\</span></span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>     <span class="at">-H</span> <span class="st">&quot;x-api-secret: aAgYYud97Kp29Lif9u0i&quot;</span> <span class="dt">\</span></span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>     <span class="at">-d</span> <span class="st">&#39;{&quot;data&quot;:[{&quot;id&quot;:&quot;test&quot;,&quot;title&quot;:&quot;Test&quot;}]}&#39;</span> <span class="dt">\</span></span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a>     http://62.169.25.188:3002/bookmarks</span></code></pre></div>
<hr />
<h2 id="estructures-de-dades">Estructures de Dades</h2>
<h3 id="typescript-types-types.ts">TypeScript Types (types.ts)</h3>
<p><strong>1. TweetRaw - Format Twitter Export</strong></p>
<div class="sourceCode" id="cb50"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="kw">interface</span> TweetRaw {</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>  full_text<span class="op">?:</span> <span class="dt">string</span>        <span class="co">// Text complet del tweet</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>  text<span class="op">?:</span> <span class="dt">string</span>             <span class="co">// Camp alternatiu per text</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>  id_str<span class="op">?:</span> <span class="dt">string</span>           <span class="co">// ID del tweet (string)</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>  id<span class="op">?:</span> <span class="dt">string</span>               <span class="co">// ID alternatiu</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>  created_at<span class="op">?:</span> <span class="dt">string</span>       <span class="co">// Data creaciÃ³ format Twitter</span></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>  user<span class="op">?:</span> {</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>    name<span class="op">?:</span> <span class="dt">string</span>           <span class="co">// Nom display de l&#39;usuari</span></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>    screen_name<span class="op">?:</span> <span class="dt">string</span>    <span class="co">// @handle</span></span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>  entities<span class="op">?:</span> {</span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>    urls<span class="op">?:</span> <span class="bu">Array</span><span class="op">&lt;</span>{</span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>      expanded_url<span class="op">:</span> <span class="dt">string</span>  <span class="co">// URLs expandides</span></span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>    }<span class="op">&gt;</span></span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><strong>Exemple Real:</strong></p>
<div class="sourceCode" id="cb51"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;full_text&quot;</span><span class="fu">:</span> <span class="st">&quot;Just released a new tutorial on RAG...&quot;</span><span class="fu">,</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;id_str&quot;</span><span class="fu">:</span> <span class="st">&quot;1862103456789012345&quot;</span><span class="fu">,</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;created_at&quot;</span><span class="fu">:</span> <span class="st">&quot;Wed Dec 04 10:30:00 +0000 2024&quot;</span><span class="fu">,</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;user&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;AI Researcher&quot;</span><span class="fu">,</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;screen_name&quot;</span><span class="fu">:</span> <span class="st">&quot;ai_researcher&quot;</span></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;entities&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;urls&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a>      <span class="fu">{</span> <span class="dt">&quot;expanded_url&quot;</span><span class="fu">:</span> <span class="st">&quot;https://example.com/tutorial&quot;</span> <span class="fu">}</span></span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a>    <span class="ot">]</span></span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb51-14"><a href="#cb51-14" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>2. Bookmark - Format Intern AplicaciÃ³</strong></p>
<div class="sourceCode" id="cb52"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="kw">interface</span> Bookmark {</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>  id<span class="op">:</span> <span class="dt">string</span>                <span class="co">// ID Ãºnic: {tweetId}-{random}</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>  title<span class="op">:</span> <span class="dt">string</span>             <span class="co">// TÃ­tol generat per Gemini (catalÃ )</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>  description<span class="op">:</span> <span class="dt">string</span>       <span class="co">// Text original (max 280 chars)</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>  author<span class="op">:</span> <span class="dt">string</span>            <span class="co">// @username o nom display</span></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>  originalLink<span class="op">:</span> <span class="dt">string</span>      <span class="co">// URL tweet: twitter.com/i/web/status/{id}</span></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>  externalLinks<span class="op">:</span> <span class="dt">string</span>[]   <span class="co">// URLs extrets per Gemini</span></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>  category<span class="op">:</span> <span class="dt">string</span>          <span class="co">// Categoria assignada</span></span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>  createdAt<span class="op">:</span> <span class="dt">number</span>         <span class="co">// Timestamp Unix (ms)</span></span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><strong>Exemple:</strong></p>
<div class="sourceCode" id="cb53"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;1862103456789012345-a7b3c9&quot;</span><span class="fu">,</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;Tutorial complet sobre implementaciÃ³ de RAG&quot;</span><span class="fu">,</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;description&quot;</span><span class="fu">:</span> <span class="st">&quot;Just released a new tutorial on RAG...&quot;</span><span class="fu">,</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;author&quot;</span><span class="fu">:</span> <span class="st">&quot;@ai_researcher&quot;</span><span class="fu">,</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;originalLink&quot;</span><span class="fu">:</span> <span class="st">&quot;https://twitter.com/i/web/status/1862103456789012345&quot;</span><span class="fu">,</span></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;externalLinks&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;https://example.com/tutorial&quot;</span><span class="ot">]</span><span class="fu">,</span></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;category&quot;</span><span class="fu">:</span> <span class="st">&quot;RAG&quot;</span><span class="fu">,</span></span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;createdAt&quot;</span><span class="fu">:</span> <span class="dv">1733313000000</span></span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>3. ProcessedTweetResult - Resposta Gemini</strong></p>
<div class="sourceCode" id="cb54"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="kw">interface</span> ProcessedTweetResult {</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>  originalId<span class="op">:</span> <span class="dt">string</span>        <span class="co">// ID del tweet processat</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>  isAI<span class="op">:</span> <span class="dt">boolean</span>             <span class="co">// true si relacionat amb IA</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>  title<span class="op">:</span> <span class="dt">string</span>             <span class="co">// TÃ­tol generat (buit si isAI=false)</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>  description<span class="op">:</span> <span class="dt">string</span>       <span class="co">// NO USAT (sempre buit)</span></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>  category<span class="op">:</span> <span class="dt">string</span>          <span class="co">// Categoria (buit si isAI=false)</span></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>  externalLinks<span class="op">:</span> <span class="dt">string</span>[]   <span class="co">// URLs extrets ([] si isAI=false)</span></span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><strong>4. Category - Alias</strong></p>
<div class="sourceCode" id="cb55"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> Category <span class="op">=</span> <span class="dt">string</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a><span class="co">// Valors permesos:</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> DEFAULT_CATEGORIES <span class="op">=</span> [</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;DivulgaciÃ³&quot;</span><span class="op">,</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Agents&quot;</span><span class="op">,</span></span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Skills&quot;</span><span class="op">,</span></span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;RAG&quot;</span><span class="op">,</span></span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Cursos&quot;</span><span class="op">,</span></span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;NotÃ­cies&quot;</span><span class="op">,</span></span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Eines&quot;</span><span class="op">,</span></span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Altres&quot;</span></span>
<span id="cb55-13"><a href="#cb55-13" aria-hidden="true" tabindex="-1"></a>]</span></code></pre></div>
<p><strong>5. LogEntry - Sistema de Logs</strong></p>
<div class="sourceCode" id="cb56"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="kw">interface</span> LogEntry {</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>  timestamp<span class="op">:</span> <span class="bu">Date</span>           <span class="co">// Moment del log</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>  type<span class="op">:</span> <span class="st">&#39;info&#39;</span> <span class="op">|</span> <span class="st">&#39;success&#39;</span> <span class="op">|</span> <span class="st">&#39;warning&#39;</span> <span class="op">|</span> <span class="st">&#39;error&#39;</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>  message<span class="op">:</span> <span class="dt">string</span>           <span class="co">// Text del missatge</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><strong>Exemple:</strong></p>
<div class="sourceCode" id="cb57"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;timestamp&quot;</span><span class="fu">:</span> <span class="st">&quot;2024-12-04T10:30:00.000Z&quot;</span><span class="fu">,</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;success&quot;</span><span class="fu">,</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;message&quot;</span><span class="fu">:</span> <span class="st">&quot;Processat tweet 15/20&quot;</span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>6. BackupFormat - Fitxer dâ€™ExportaciÃ³</strong></p>
<div class="sourceCode" id="cb58"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="kw">interface</span> BackupFormat {</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>  backupVersion<span class="op">:</span> <span class="dt">number</span>     <span class="co">// VersiÃ³ del format (actualment 1)</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>  timestamp<span class="op">:</span> <span class="dt">number</span>         <span class="co">// Unix timestamp de l&#39;export</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>  categories<span class="op">:</span> Category[]    <span class="co">// Llista de categories</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>  bookmarks<span class="op">:</span> Bookmark[]     <span class="co">// Array de bookmarks</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>  deletedIds<span class="op">:</span> <span class="dt">string</span>[]      <span class="co">// IDs eliminats (blacklist)</span></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><strong>Exemple:</strong></p>
<div class="sourceCode" id="cb59"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;backupVersion&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;timestamp&quot;</span><span class="fu">:</span> <span class="dv">1733313000000</span><span class="fu">,</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;categories&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;DivulgaciÃ³&quot;</span><span class="ot">,</span> <span class="st">&quot;Agents&quot;</span><span class="ot">,</span> <span class="st">&quot;RAG&quot;</span><span class="ot">]</span><span class="fu">,</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;bookmarks&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">{</span> <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;...&quot;</span><span class="fu">,</span> <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;...&quot;</span><span class="fu">,</span> <span class="er">...</span> <span class="fu">}</span></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;deletedIds&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;1862104567890123456&quot;</span><span class="ot">]</span></span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<h3 id="transformacions-de-dades">Transformacions de Dades</h3>
<p><strong>TweetRaw â†’ Bookmark:</strong></p>
<div class="sourceCode" id="cb60"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">createBookmark</span>(tweet<span class="op">:</span> TweetRaw<span class="op">,</span> aiResult<span class="op">:</span> ProcessedTweetResult)<span class="op">:</span> Bookmark {</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">// 1. Extreure text</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> fullText <span class="op">=</span> tweet<span class="op">.</span><span class="at">full_text</span> <span class="op">||</span> tweet<span class="op">.</span><span class="at">text</span> <span class="op">||</span> <span class="st">&#39;&#39;</span></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> truncated <span class="op">=</span> fullText<span class="op">.</span><span class="at">length</span> <span class="op">&gt;</span> <span class="dv">280</span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">?</span> fullText<span class="op">.</span><span class="fu">substring</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">280</span>) <span class="op">+</span> <span class="st">&#39;[...]&#39;</span></span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">:</span> fullText</span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">// 2. Extreure autor</span></span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> author <span class="op">=</span> tweet<span class="op">.</span><span class="at">user</span><span class="op">?.</span><span class="at">screen_name</span></span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">?</span> <span class="vs">`@</span><span class="sc">${</span>tweet<span class="op">.</span><span class="at">user</span><span class="op">.</span><span class="at">screen_name</span><span class="sc">}</span><span class="vs">`</span></span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">:</span> (tweet<span class="op">.</span><span class="at">user</span><span class="op">?.</span><span class="at">name</span> <span class="op">||</span> <span class="st">&#39;Unknown&#39;</span>)</span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-13"><a href="#cb60-13" aria-hidden="true" tabindex="-1"></a>  <span class="co">// 3. Crear link original</span></span>
<span id="cb60-14"><a href="#cb60-14" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> tweetId <span class="op">=</span> tweet<span class="op">.</span><span class="at">id_str</span> <span class="op">||</span> tweet<span class="op">.</span><span class="at">id</span></span>
<span id="cb60-15"><a href="#cb60-15" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> originalLink <span class="op">=</span> <span class="vs">`https://twitter.com/i/web/status/</span><span class="sc">${</span>tweetId<span class="sc">}</span><span class="vs">`</span></span>
<span id="cb60-16"><a href="#cb60-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-17"><a href="#cb60-17" aria-hidden="true" tabindex="-1"></a>  <span class="co">// 4. Generar ID Ãºnic</span></span>
<span id="cb60-18"><a href="#cb60-18" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> id <span class="op">=</span> <span class="vs">`</span><span class="sc">${</span>tweetId<span class="sc">}</span><span class="vs">-</span><span class="sc">${</span><span class="bu">Math</span><span class="op">.</span><span class="fu">random</span>()<span class="op">.</span><span class="fu">toString</span>(<span class="dv">36</span>)<span class="op">.</span><span class="fu">substr</span>(<span class="dv">2</span><span class="op">,</span> <span class="dv">6</span>)<span class="sc">}</span><span class="vs">`</span></span>
<span id="cb60-19"><a href="#cb60-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-20"><a href="#cb60-20" aria-hidden="true" tabindex="-1"></a>  <span class="co">// 5. Timestamp</span></span>
<span id="cb60-21"><a href="#cb60-21" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> createdAt <span class="op">=</span> tweet<span class="op">.</span><span class="at">created_at</span></span>
<span id="cb60-22"><a href="#cb60-22" aria-hidden="true" tabindex="-1"></a>    <span class="op">?</span> <span class="kw">new</span> <span class="bu">Date</span>(tweet<span class="op">.</span><span class="at">created_at</span>)<span class="op">.</span><span class="fu">getTime</span>()</span>
<span id="cb60-23"><a href="#cb60-23" aria-hidden="true" tabindex="-1"></a>    <span class="op">:</span> <span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>()</span>
<span id="cb60-24"><a href="#cb60-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-25"><a href="#cb60-25" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> {</span>
<span id="cb60-26"><a href="#cb60-26" aria-hidden="true" tabindex="-1"></a>    id<span class="op">,</span></span>
<span id="cb60-27"><a href="#cb60-27" aria-hidden="true" tabindex="-1"></a>    title<span class="op">:</span> aiResult<span class="op">.</span><span class="at">title</span><span class="op">,</span></span>
<span id="cb60-28"><a href="#cb60-28" aria-hidden="true" tabindex="-1"></a>    description<span class="op">:</span> truncated<span class="op">,</span></span>
<span id="cb60-29"><a href="#cb60-29" aria-hidden="true" tabindex="-1"></a>    author<span class="op">,</span></span>
<span id="cb60-30"><a href="#cb60-30" aria-hidden="true" tabindex="-1"></a>    originalLink<span class="op">,</span></span>
<span id="cb60-31"><a href="#cb60-31" aria-hidden="true" tabindex="-1"></a>    externalLinks<span class="op">:</span> aiResult<span class="op">.</span><span class="at">externalLinks</span><span class="op">,</span></span>
<span id="cb60-32"><a href="#cb60-32" aria-hidden="true" tabindex="-1"></a>    category<span class="op">:</span> aiResult<span class="op">.</span><span class="at">category</span><span class="op">,</span></span>
<span id="cb60-33"><a href="#cb60-33" aria-hidden="true" tabindex="-1"></a>    createdAt</span>
<span id="cb60-34"><a href="#cb60-34" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb60-35"><a href="#cb60-35" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<hr />
<h2 id="caracterÃ­stiques-especials">CaracterÃ­stiques Especials</h2>
<h3 id="disseny-brutalista">1. Disseny Brutalista</h3>
<p><strong>Filosofia:</strong> - Minimalista i funcional - Tipografia
bold i gran - Borders gruixuts negres - Shadows dures (no difuminades) -
Colors limitats: blanc, negre, groc - Sense gradients ni
transparÃ¨ncies</p>
<p><strong>ImplementaciÃ³ CSS:</strong></p>
<div class="sourceCode" id="cb61"><pre
class="sourceCode css"><code class="sourceCode css"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* Base components */</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="fu">.button</span> {</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">border</span><span class="ch">:</span> <span class="dv">2</span><span class="dt">px</span> <span class="dv">solid</span> <span class="cn">#000</span><span class="op">;</span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">box-shadow</span><span class="ch">:</span> <span class="dv">4</span><span class="dt">px</span> <span class="dv">4</span><span class="dt">px</span> <span class="dv">0</span><span class="dt">px</span> <span class="dv">0</span><span class="dt">px</span> <span class="cn">#000</span><span class="op">;</span></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">font-weight</span><span class="ch">:</span> <span class="dv">800</span><span class="op">;</span></span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">transition</span><span class="ch">:</span> <span class="dv">all</span> <span class="dv">0.15</span><span class="dt">s</span> <span class="dv">ease</span><span class="op">;</span></span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a><span class="fu">.button</span><span class="in">:hover</span> {</span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a>  <span class="kw">transform</span><span class="ch">:</span> <span class="fu">translate(</span><span class="dv">-2</span><span class="dt">px</span><span class="op">,</span> <span class="dv">-2</span><span class="dt">px</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a>  <span class="kw">box-shadow</span><span class="ch">:</span> <span class="dv">6</span><span class="dt">px</span> <span class="dv">6</span><span class="dt">px</span> <span class="dv">0</span><span class="dt">px</span> <span class="dv">0</span><span class="dt">px</span> <span class="cn">#000</span><span class="op">;</span></span>
<span id="cb61-12"><a href="#cb61-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb61-13"><a href="#cb61-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-14"><a href="#cb61-14" aria-hidden="true" tabindex="-1"></a><span class="fu">.button</span><span class="in">:active</span> {</span>
<span id="cb61-15"><a href="#cb61-15" aria-hidden="true" tabindex="-1"></a>  <span class="kw">transform</span><span class="ch">:</span> <span class="fu">translate(</span><span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="fu">)</span><span class="op">;</span></span>
<span id="cb61-16"><a href="#cb61-16" aria-hidden="true" tabindex="-1"></a>  <span class="kw">box-shadow</span><span class="ch">:</span> <span class="dv">0</span><span class="dt">px</span> <span class="dv">0</span><span class="dt">px</span> <span class="dv">0</span><span class="dt">px</span> <span class="dv">0</span><span class="dt">px</span> <span class="cn">#000</span><span class="op">;</span></span>
<span id="cb61-17"><a href="#cb61-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb61-18"><a href="#cb61-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-19"><a href="#cb61-19" aria-hidden="true" tabindex="-1"></a><span class="co">/* Card */</span></span>
<span id="cb61-20"><a href="#cb61-20" aria-hidden="true" tabindex="-1"></a><span class="fu">.card</span> {</span>
<span id="cb61-21"><a href="#cb61-21" aria-hidden="true" tabindex="-1"></a>  <span class="kw">border</span><span class="ch">:</span> <span class="dv">2</span><span class="dt">px</span> <span class="dv">solid</span> <span class="cn">#000</span><span class="op">;</span></span>
<span id="cb61-22"><a href="#cb61-22" aria-hidden="true" tabindex="-1"></a>  <span class="kw">box-shadow</span><span class="ch">:</span> <span class="dv">4</span><span class="dt">px</span> <span class="dv">4</span><span class="dt">px</span> <span class="dv">0</span><span class="dt">px</span> <span class="dv">0</span><span class="dt">px</span> <span class="cn">#000</span><span class="op">;</span></span>
<span id="cb61-23"><a href="#cb61-23" aria-hidden="true" tabindex="-1"></a>  <span class="kw">background</span><span class="ch">:</span> <span class="cn">white</span><span class="op">;</span></span>
<span id="cb61-24"><a href="#cb61-24" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb61-25"><a href="#cb61-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-26"><a href="#cb61-26" aria-hidden="true" tabindex="-1"></a><span class="co">/* Badge */</span></span>
<span id="cb61-27"><a href="#cb61-27" aria-hidden="true" tabindex="-1"></a><span class="fu">.badge</span> {</span>
<span id="cb61-28"><a href="#cb61-28" aria-hidden="true" tabindex="-1"></a>  <span class="kw">border</span><span class="ch">:</span> <span class="dv">2</span><span class="dt">px</span> <span class="dv">solid</span> <span class="cn">#000</span><span class="op">;</span></span>
<span id="cb61-29"><a href="#cb61-29" aria-hidden="true" tabindex="-1"></a>  <span class="kw">background</span><span class="ch">:</span> <span class="cn">#ffc107</span><span class="op">;</span></span>
<span id="cb61-30"><a href="#cb61-30" aria-hidden="true" tabindex="-1"></a>  <span class="kw">font-weight</span><span class="ch">:</span> <span class="dv">700</span><span class="op">;</span></span>
<span id="cb61-31"><a href="#cb61-31" aria-hidden="true" tabindex="-1"></a>  <span class="kw">padding</span><span class="ch">:</span> <span class="dv">4</span><span class="dt">px</span> <span class="dv">12</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb61-32"><a href="#cb61-32" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><strong>Exemples Visuals:</strong></p>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [DivulgaciÃ³]                   â”‚ â† Badge groc
â”‚                                 â”‚
â”‚  Guia completa sobre RAG        â”‚ â† Title (bold)
â”‚                                 â”‚
â”‚  AprÃ¨n a implementar...         â”‚ â† Description
â”‚                                 â”‚
â”‚  @username â€¢ 04/12/2024         â”‚ â† Metadata
â”‚                                 â”‚
â”‚  ğŸ”— example.com                 â”‚ â† External links
â”‚                                 â”‚
â”‚  [âœï¸ Editar] [ğŸ—‘ï¸ Eliminar]      â”‚ â† Actions
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â””â”€â”€â”€â”€â”€â”˜ â† Hard shadow</code></pre>
<h3 id="sistema-de-logs-en-temps-real">2. Sistema de Logs en Temps
Real</h3>
<p><strong>InterfÃ­cie de Consola:</strong></p>
<pre><code>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  Registre d&#39;ImportaciÃ³
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[10:30:15] â„¹ï¸  Iniciant procÃ©s d&#39;importaciÃ³...
[10:30:16] â„¹ï¸  Detectat arxiu: twitter-bookmarks.json
[10:30:16] â„¹ï¸  150 tweets trobats al fitxer
[10:30:17] â„¹ï¸  120 tweets nous (30 duplicats ignorats)
[10:30:18] â³ Processant tweet 1/120...
[10:30:22] âœ… Tweet 1/120: Guia sobre RAG
[10:30:26] âœ… Tweet 2/120: Nou model d&#39;OpenAI
...
[10:35:40] âš ï¸  Rate limit detectat, esperant 10s...
[10:35:50] â³ Reintentant tweet 45/120...
[10:35:54] âœ… Tweet 45/120: Tutorial LangChain
...
[10:45:20] âœ… ProcÃ©s finalitzat!
[10:45:20] â„¹ï¸  95 tweets d&#39;IA importats
[10:45:20] â„¹ï¸  25 tweets rebutjats (no IA)
[10:45:20] â„¹ï¸  30 duplicats ignorats

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</code></pre>
<p><strong>Colors per Tipus:</strong> - ğŸ”µ <strong>Info:</strong> Text
blanc/gris - ğŸŸ¢ <strong>Success:</strong> Text verd - ğŸŸ¡
<strong>Warning:</strong> Text groc/taronja - ğŸ”´ <strong>Error:</strong>
Text vermell</p>
<p><strong>Features:</strong> - Auto-scroll a Ãºltim log - Timestamp per
cada entrada - Comptador de progrÃ©s (X/Y) - BotÃ³ â€œAturarâ€ per cancelÂ·lar
procÃ©s</p>
<h3 id="responsive-design-mÃ²bil">3. Responsive Design MÃ²bil</h3>
<p><strong>Breakpoints:</strong></p>
<div class="sourceCode" id="cb64"><pre
class="sourceCode css"><code class="sourceCode css"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* Mobile */</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="im">@media</span> <span class="fu">(</span><span class="kw">max-width</span><span class="ch">:</span> <span class="dv">768</span><span class="dt">px</span><span class="fu">)</span> {</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">/* 1 columna */</span></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">.grid</span> { <span class="kw">grid-template-columns</span><span class="ch">:</span> <span class="dv">1</span><span class="dt">fr</span><span class="op">;</span> }</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">/* Menu hamburguesa */</span></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">.desktop-sidebar</span> { <span class="kw">display</span><span class="ch">:</span> <span class="dv">none</span><span class="op">;</span> }</span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">.mobile-menu-button</span> { <span class="kw">display</span><span class="ch">:</span> <span class="dv">block</span><span class="op">;</span> }</span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-11"><a href="#cb64-11" aria-hidden="true" tabindex="-1"></a><span class="co">/* Tablet */</span></span>
<span id="cb64-12"><a href="#cb64-12" aria-hidden="true" tabindex="-1"></a><span class="im">@media</span> <span class="fu">(</span><span class="kw">min-width</span><span class="ch">:</span> <span class="dv">769</span><span class="dt">px</span><span class="fu">)</span> <span class="kw">and</span> <span class="fu">(</span><span class="kw">max-width</span><span class="ch">:</span> <span class="dv">1024</span><span class="dt">px</span><span class="fu">)</span> {</span>
<span id="cb64-13"><a href="#cb64-13" aria-hidden="true" tabindex="-1"></a>  <span class="co">/* 2 columnes */</span></span>
<span id="cb64-14"><a href="#cb64-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">.grid</span> { <span class="kw">grid-template-columns</span><span class="ch">:</span> <span class="fu">repeat(</span><span class="dv">2</span><span class="op">,</span> <span class="dv">1</span><span class="dt">fr</span><span class="fu">)</span><span class="op">;</span> }</span>
<span id="cb64-15"><a href="#cb64-15" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb64-16"><a href="#cb64-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-17"><a href="#cb64-17" aria-hidden="true" tabindex="-1"></a><span class="co">/* Desktop */</span></span>
<span id="cb64-18"><a href="#cb64-18" aria-hidden="true" tabindex="-1"></a><span class="im">@media</span> <span class="fu">(</span><span class="kw">min-width</span><span class="ch">:</span> <span class="dv">1025</span><span class="dt">px</span><span class="fu">)</span> {</span>
<span id="cb64-19"><a href="#cb64-19" aria-hidden="true" tabindex="-1"></a>  <span class="co">/* 3-4 columnes */</span></span>
<span id="cb64-20"><a href="#cb64-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">.grid</span> { <span class="kw">grid-template-columns</span><span class="ch">:</span> <span class="fu">repeat(</span><span class="dv">auto-fill</span><span class="op">,</span> <span class="fu">minmax(</span><span class="dv">350</span><span class="dt">px</span><span class="op">,</span> <span class="dv">1</span><span class="dt">fr</span><span class="fu">))</span><span class="op">;</span> }</span>
<span id="cb64-21"><a href="#cb64-21" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><strong>Adaptacions MÃ²bil:</strong> 1. <strong>Header:</strong> -
Logo + Hamburger button - Category button fix al centre top</p>
<ol start="2" type="1">
<li><strong>Sidebar:</strong>
<ul>
<li>Modal overlay en pantalla completa</li>
<li>Llista vertical de categories</li>
<li>BotÃ³ tancar (X) dalt a la dreta</li>
</ul></li>
<li><strong>Cards:</strong>
<ul>
<li>Full width (1 columna)</li>
<li>Touch targets mÃ©s grans (48x48px min)</li>
<li>Padding augmentat</li>
</ul></li>
<li><strong>Modals:</strong>
<ul>
<li>Full screen en mÃ²bil</li>
<li>Padding reduÃ¯t</li>
<li>Font size ajustat</li>
</ul></li>
</ol>
<h3 id="rate-limiting-intelligent">4. Rate Limiting IntelÂ·ligent</h3>
<p><strong>Problema:</strong> Gemini Free Tier = 15 RPM (requests per
minute)</p>
<p><strong>SoluciÃ³ Implementada:</strong></p>
<div class="sourceCode" id="cb65"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co">// 1. Delay base entre requests</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> BASE_DELAY <span class="op">=</span> <span class="dv">4000</span>  <span class="co">// 4 segons = ~15 RPM</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span> <span class="fu">processBookmarksWithGemini</span>(tweets) {</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> tweets<span class="op">.</span><span class="at">length</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span> {</span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Process tweet</span></span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> result <span class="op">=</span> <span class="cf">await</span> <span class="fu">generateContent</span>(tweet)</span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Wait abans del segÃ¼ent</span></span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (i <span class="op">&lt;</span> tweets<span class="op">.</span><span class="at">length</span> <span class="op">-</span> <span class="dv">1</span>) {</span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">await</span> <span class="fu">sleep</span>(BASE_DELAY)</span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-15"><a href="#cb65-15" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">catch</span> (error) {</span>
<span id="cb65-16"><a href="#cb65-16" aria-hidden="true" tabindex="-1"></a>      <span class="co">// Handle 429 error</span></span>
<span id="cb65-17"><a href="#cb65-17" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="fu">is429Error</span>(error)) {</span>
<span id="cb65-18"><a href="#cb65-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">await</span> <span class="fu">handleRateLimitWithRetry</span>(tweet<span class="op">,</span> i)</span>
<span id="cb65-19"><a href="#cb65-19" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb65-20"><a href="#cb65-20" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb65-21"><a href="#cb65-21" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb65-22"><a href="#cb65-22" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb65-23"><a href="#cb65-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-24"><a href="#cb65-24" aria-hidden="true" tabindex="-1"></a><span class="co">// 2. Exponential backoff</span></span>
<span id="cb65-25"><a href="#cb65-25" aria-hidden="true" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span> <span class="fu">handleRateLimitWithRetry</span>(tweet<span class="op">,</span> attempt) {</span>
<span id="cb65-26"><a href="#cb65-26" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> delays <span class="op">=</span> [<span class="dv">10</span><span class="op">,</span> <span class="dv">15</span><span class="op">,</span> <span class="fl">22.5</span><span class="op">,</span> <span class="fl">33.75</span><span class="op">,</span> <span class="fl">50.625</span><span class="op">,</span> <span class="dv">60</span><span class="op">,</span> <span class="dv">60</span><span class="op">,</span> <span class="dv">60</span><span class="op">,</span> <span class="dv">60</span><span class="op">,</span> <span class="dv">60</span>]</span>
<span id="cb65-27"><a href="#cb65-27" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> maxRetries <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb65-28"><a href="#cb65-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-29"><a href="#cb65-29" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (attempt <span class="op">&gt;=</span> maxRetries) {</span>
<span id="cb65-30"><a href="#cb65-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(<span class="st">&#39;Max retries exceeded&#39;</span>)</span>
<span id="cb65-31"><a href="#cb65-31" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb65-32"><a href="#cb65-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-33"><a href="#cb65-33" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> waitTime <span class="op">=</span> delays[attempt] <span class="op">*</span> <span class="dv">1000</span></span>
<span id="cb65-34"><a href="#cb65-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">addLog</span>(<span class="st">&#39;warning&#39;</span><span class="op">,</span> <span class="vs">`Rate limit! Esperant </span><span class="sc">${</span>delays[attempt]<span class="sc">}</span><span class="vs">s...`</span>)</span>
<span id="cb65-35"><a href="#cb65-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-36"><a href="#cb65-36" aria-hidden="true" tabindex="-1"></a>  <span class="cf">await</span> <span class="fu">sleep</span>(waitTime)</span>
<span id="cb65-37"><a href="#cb65-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-38"><a href="#cb65-38" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Retry</span></span>
<span id="cb65-39"><a href="#cb65-39" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="cf">await</span> <span class="fu">generateContent</span>(tweet)</span>
<span id="cb65-40"><a href="#cb65-40" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><strong>Timeline Exemple:</strong></p>
<pre><code>T+0s:   Request 1 â†’ Success
T+4s:   Request 2 â†’ Success
T+8s:   Request 3 â†’ Success
...
T+56s:  Request 15 â†’ Success
T+60s:  Request 16 â†’ 429 ERROR!
T+60s:  Wait 10s...
T+70s:  Retry request 16 â†’ Success
T+74s:  Request 17 â†’ Success</code></pre>
<p><strong>DetecciÃ³ de 429:</strong></p>
<div class="sourceCode" id="cb67"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">is429Error</span>(error<span class="op">:</span> <span class="dt">any</span>)<span class="op">:</span> <span class="dt">boolean</span> {</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">// 1. Check error message</span></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (error<span class="op">.</span><span class="at">message</span><span class="op">?.</span><span class="fu">includes</span>(<span class="st">&#39;429&#39;</span>)) <span class="cf">return</span> <span class="kw">true</span></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">// 2. Check status property</span></span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (error<span class="op">.</span><span class="at">status</span> <span class="op">===</span> <span class="dv">429</span>) <span class="cf">return</span> <span class="kw">true</span></span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">// 3. Check response text</span></span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (error<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">includes</span>(<span class="st">&#39;RESOURCE_EXHAUSTED&#39;</span>)) <span class="cf">return</span> <span class="kw">true</span></span>
<span id="cb67-10"><a href="#cb67-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-11"><a href="#cb67-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="kw">false</span></span>
<span id="cb67-12"><a href="#cb67-12" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="sistema-de-backuprestore">5. Sistema de Backup/Restore</h3>
<p><strong>Format de Backup:</strong></p>
<div class="sourceCode" id="cb68"><pre
class="sourceCode json"><code class="sourceCode json"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;backupVersion&quot;</span><span class="fu">:</span> <span class="dv">1</span><span class="fu">,</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;timestamp&quot;</span><span class="fu">:</span> <span class="dv">1733313000000</span><span class="fu">,</span></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;categories&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="er">...</span><span class="ot">]</span><span class="fu">,</span></span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;bookmarks&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="er">...</span><span class="ot">]</span><span class="fu">,</span></span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;deletedIds&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="er">...</span><span class="ot">]</span></span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><strong>Export:</strong></p>
<div class="sourceCode" id="cb69"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">exportBackupJSON</span>() {</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> backup <span class="op">=</span> {</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>    backupVersion<span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>    timestamp<span class="op">:</span> <span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>()<span class="op">,</span></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>    categories<span class="op">,</span></span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>    bookmarks<span class="op">,</span></span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>    deletedIds</span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> blob <span class="op">=</span> <span class="kw">new</span> <span class="bu">Blob</span>(</span>
<span id="cb69-11"><a href="#cb69-11" aria-hidden="true" tabindex="-1"></a>    [<span class="bu">JSON</span><span class="op">.</span><span class="fu">stringify</span>(backup<span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="dv">2</span>)]<span class="op">,</span></span>
<span id="cb69-12"><a href="#cb69-12" aria-hidden="true" tabindex="-1"></a>    { type<span class="op">:</span> <span class="st">&#39;application/json&#39;</span> }</span>
<span id="cb69-13"><a href="#cb69-13" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb69-14"><a href="#cb69-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-15"><a href="#cb69-15" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> url <span class="op">=</span> URL<span class="op">.</span><span class="fu">createObjectURL</span>(blob)</span>
<span id="cb69-16"><a href="#cb69-16" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> a <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">&#39;a&#39;</span>)</span>
<span id="cb69-17"><a href="#cb69-17" aria-hidden="true" tabindex="-1"></a>  a<span class="op">.</span><span class="at">href</span> <span class="op">=</span> url</span>
<span id="cb69-18"><a href="#cb69-18" aria-hidden="true" tabindex="-1"></a>  a<span class="op">.</span><span class="at">download</span> <span class="op">=</span> <span class="vs">`ai-bookmarks-backup-</span><span class="sc">${</span><span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>()<span class="sc">}</span><span class="vs">.json`</span></span>
<span id="cb69-19"><a href="#cb69-19" aria-hidden="true" tabindex="-1"></a>  a<span class="op">.</span><span class="fu">click</span>()</span>
<span id="cb69-20"><a href="#cb69-20" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><strong>Import/Merge:</strong></p>
<div class="sourceCode" id="cb70"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">mergeBackup</span>(backup<span class="op">:</span> BackupFormat) {</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">// 1. Merge categories (uniÃ³ de sets)</span></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> newCategories <span class="op">=</span> [</span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">...</span><span class="kw">new</span> <span class="bu">Set</span>([<span class="op">...</span>categories<span class="op">,</span> <span class="op">...</span>backup<span class="op">.</span><span class="at">categories</span>])</span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a>  <span class="co">// 2. Merge bookmarks (deduplica per ID)</span></span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> existingIds <span class="op">=</span> <span class="kw">new</span> <span class="bu">Set</span>(bookmarks<span class="op">.</span><span class="fu">map</span>(b <span class="kw">=&gt;</span> b<span class="op">.</span><span class="at">id</span>))</span>
<span id="cb70-9"><a href="#cb70-9" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> newBookmarks <span class="op">=</span> backup<span class="op">.</span><span class="at">bookmarks</span><span class="op">.</span><span class="fu">filter</span>(</span>
<span id="cb70-10"><a href="#cb70-10" aria-hidden="true" tabindex="-1"></a>    b <span class="kw">=&gt;</span> <span class="op">!</span>existingIds<span class="op">.</span><span class="fu">has</span>(b<span class="op">.</span><span class="at">id</span>)</span>
<span id="cb70-11"><a href="#cb70-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb70-12"><a href="#cb70-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-13"><a href="#cb70-13" aria-hidden="true" tabindex="-1"></a>  <span class="co">// 3. Merge deletedIds (uniÃ³ de sets)</span></span>
<span id="cb70-14"><a href="#cb70-14" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> newDeletedIds <span class="op">=</span> [</span>
<span id="cb70-15"><a href="#cb70-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">...</span><span class="kw">new</span> <span class="bu">Set</span>([<span class="op">...</span>deletedIds<span class="op">,</span> <span class="op">...</span>backup<span class="op">.</span><span class="at">deletedIds</span>])</span>
<span id="cb70-16"><a href="#cb70-16" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb70-17"><a href="#cb70-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-18"><a href="#cb70-18" aria-hidden="true" tabindex="-1"></a>  <span class="co">// 4. Update state</span></span>
<span id="cb70-19"><a href="#cb70-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setCategories</span>(newCategories)</span>
<span id="cb70-20"><a href="#cb70-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setBookmarks</span>([<span class="op">...</span>bookmarks<span class="op">,</span> <span class="op">...</span>newBookmarks])</span>
<span id="cb70-21"><a href="#cb70-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">setDeletedIds</span>(newDeletedIds)</span>
<span id="cb70-22"><a href="#cb70-22" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<h3 id="sistema-de-cerca-i-filtratge">6. Sistema de Cerca i
Filtratge</h3>
<p><strong>Filtratge per Categoria:</strong></p>
<div class="sourceCode" id="cb71"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> filteredBookmarks <span class="op">=</span> <span class="fu">useMemo</span>(() <span class="kw">=&gt;</span> {</span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (selectedCategory <span class="op">===</span> <span class="st">&#39;Tots&#39;</span>) {</span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> bookmarks</span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> bookmarks<span class="op">.</span><span class="fu">filter</span>(b <span class="kw">=&gt;</span> b<span class="op">.</span><span class="at">category</span> <span class="op">===</span> selectedCategory)</span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>}<span class="op">,</span> [bookmarks<span class="op">,</span> selectedCategory])</span></code></pre></div>
<p><strong>UI de Categories:</strong></p>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Tots (150)]                â”‚ â† Totes les categories
â”‚  [DivulgaciÃ³ (45)]           â”‚
â”‚  [Agents (23)]               â”‚
â”‚  [Skills (18)]               â”‚
â”‚  [RAG (32)]                  â”‚
â”‚  [Cursos (12)]               â”‚
â”‚  [NotÃ­cies (8)]              â”‚
â”‚  [Eines (10)]                â”‚
â”‚  [Altres (2)]                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<p><strong>Comptadors DinÃ mics:</strong></p>
<div class="sourceCode" id="cb73"><pre
class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> categoryCounts <span class="op">=</span> <span class="fu">useMemo</span>(() <span class="kw">=&gt;</span> {</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> counts<span class="op">:</span> <span class="bu">Record</span><span class="op">&lt;</span><span class="dt">string</span><span class="op">,</span> <span class="dt">number</span><span class="op">&gt;</span> <span class="op">=</span> {}</span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>  bookmarks<span class="op">.</span><span class="fu">forEach</span>(b <span class="kw">=&gt;</span> {</span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>    counts[b<span class="op">.</span><span class="at">category</span>] <span class="op">=</span> (counts[b<span class="op">.</span><span class="at">category</span>] <span class="op">||</span> <span class="dv">0</span>) <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> counts</span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a>}<span class="op">,</span> [bookmarks])</span>
<span id="cb73-10"><a href="#cb73-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-11"><a href="#cb73-11" aria-hidden="true" tabindex="-1"></a><span class="co">// Render: {category} ({categoryCounts[category] || 0})</span></span></code></pre></div>
<hr />
<h2 id="build-i-deployment">Build i Deployment</h2>
<h3 id="desenvolupament-local">Desenvolupament Local</h3>
<p><strong>1. InstalÂ·laciÃ³:</strong></p>
<div class="sourceCode" id="cb74"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ai-bookmarks</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> install</span></code></pre></div>
<p><strong>2. ConfiguraciÃ³ .env:</strong></p>
<pre class="env"><code>VITE_API_KEY=&lt;gemini-api-key&gt;
VITE_STORAGE_API_URL=http://62.169.25.188:3002
VITE_STORAGE_SECRET=aAgYYud97Kp29Lif9u0i</code></pre>
<p><strong>3. Executar dev server:</strong></p>
<div class="sourceCode" id="cb76"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run dev</span></code></pre></div>
<p>â†’ Servidor disponible a: <code>http://localhost:3000</code></p>
<p><strong>4. Verificar:</strong> - Frontend carrega correctament - Pot
importar JSON de Twitter - Gemini processa tweets (API key vÃ lida) -
Storage funciona (local o API segons .env)</p>
<h3 id="build-de-producciÃ³">Build de ProducciÃ³</h3>
<p><strong>1. Compilar TypeScript + Build Vite:</strong></p>
<div class="sourceCode" id="cb77"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run build</span></code></pre></div>
<p><strong>Sortida:</strong></p>
<pre><code>dist/
â”œâ”€â”€ index.html
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ index-[hash].js
â”‚   â”œâ”€â”€ index-[hash].css
â”‚   â””â”€â”€ [altres assets]
â””â”€â”€ vite.svg</code></pre>
<p><strong>2. Preview build local:</strong></p>
<div class="sourceCode" id="cb79"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run preview</span></code></pre></div>
<p>â†’ Servidor disponible a: <code>http://localhost:4173</code></p>
<p><strong>3. Optimitzacions aplicades:</strong> - Code splitting
automÃ tic - MinificaciÃ³ JS/CSS - Tree shaking (elimina codi no usat) -
Asset hashing per cache busting - Compression (gzip)</p>
<h3 id="deployment-frontend">Deployment Frontend</h3>
<p><strong>OpciÃ³ 1: Vercel (Recomanat)</strong></p>
<div class="sourceCode" id="cb80"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co"># InstalÂ·lar Vercel CLI</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> i <span class="at">-g</span> vercel</span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Deploy</span></span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ai-bookmarks</span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a><span class="ex">vercel</span></span>
<span id="cb80-7"><a href="#cb80-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-8"><a href="#cb80-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Configurar variables d&#39;entorn a Vercel dashboard:</span></span>
<span id="cb80-9"><a href="#cb80-9" aria-hidden="true" tabindex="-1"></a><span class="co"># VITE_API_KEY</span></span>
<span id="cb80-10"><a href="#cb80-10" aria-hidden="true" tabindex="-1"></a><span class="co"># VITE_STORAGE_API_URL</span></span>
<span id="cb80-11"><a href="#cb80-11" aria-hidden="true" tabindex="-1"></a><span class="co"># VITE_STORAGE_SECRET</span></span></code></pre></div>
<p><strong>OpciÃ³ 2: Netlify</strong></p>
<div class="sourceCode" id="cb81"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co"># netlify.toml</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="ex">[build]</span></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>  <span class="bu">command</span> = <span class="st">&quot;npm run build&quot;</span></span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>  <span class="ex">publish</span> = <span class="st">&quot;dist&quot;</span></span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Deploy</span></span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true" tabindex="-1"></a><span class="ex">netlify</span> deploy <span class="at">--prod</span></span></code></pre></div>
<p><strong>OpciÃ³ 3: VPS (mateix servidor que API)</strong></p>
<div class="sourceCode" id="cb82"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Build local</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run build</span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. Pujar dist/ al VPS</span></span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a><span class="fu">scp</span> <span class="at">-r</span> dist/<span class="pp">*</span> root@62.169.25.188:/var/www/ai-bookmarks/</span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-7"><a href="#cb82-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Configurar Nginx</span></span>
<span id="cb82-8"><a href="#cb82-8" aria-hidden="true" tabindex="-1"></a><span class="co"># /etc/nginx/sites-available/ai-bookmarks-frontend</span></span>
<span id="cb82-9"><a href="#cb82-9" aria-hidden="true" tabindex="-1"></a><span class="ex">server</span> {</span>
<span id="cb82-10"><a href="#cb82-10" aria-hidden="true" tabindex="-1"></a>    <span class="ex">listen</span> 80<span class="kw">;</span></span>
<span id="cb82-11"><a href="#cb82-11" aria-hidden="true" tabindex="-1"></a>    <span class="ex">server_name</span> ai-bookmarks.example.com<span class="kw">;</span></span>
<span id="cb82-12"><a href="#cb82-12" aria-hidden="true" tabindex="-1"></a>    <span class="ex">root</span> /var/www/ai-bookmarks<span class="kw">;</span></span>
<span id="cb82-13"><a href="#cb82-13" aria-hidden="true" tabindex="-1"></a>    <span class="ex">index</span> index.html<span class="kw">;</span></span>
<span id="cb82-14"><a href="#cb82-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-15"><a href="#cb82-15" aria-hidden="true" tabindex="-1"></a>    <span class="ex">location</span> / {</span>
<span id="cb82-16"><a href="#cb82-16" aria-hidden="true" tabindex="-1"></a>        <span class="ex">try_files</span> <span class="va">$uri</span> <span class="va">$uri</span>/ /index.html<span class="kw">;</span></span>
<span id="cb82-17"><a href="#cb82-17" aria-hidden="true" tabindex="-1"></a>    <span class="er">}</span></span>
<span id="cb82-18"><a href="#cb82-18" aria-hidden="true" tabindex="-1"></a><span class="er">}</span></span>
<span id="cb82-19"><a href="#cb82-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-20"><a href="#cb82-20" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Activar site</span></span>
<span id="cb82-21"><a href="#cb82-21" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> ln <span class="at">-s</span> /etc/nginx/sites-available/ai-bookmarks-frontend <span class="dt">\</span></span>
<span id="cb82-22"><a href="#cb82-22" aria-hidden="true" tabindex="-1"></a>            /etc/nginx/sites-enabled/</span>
<span id="cb82-23"><a href="#cb82-23" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> nginx <span class="at">-t</span></span>
<span id="cb82-24"><a href="#cb82-24" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl reload nginx</span></code></pre></div>
<p><strong>OpciÃ³ 4: GitHub Pages</strong></p>
<div class="sourceCode" id="cb83"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="co"># package.json</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a><span class="kw">{</span></span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;scripts&quot;</span><span class="ex">:</span> {</span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;deploy&quot;</span><span class="ex">:</span> <span class="st">&quot;vite build &amp;&amp; gh-pages -d dist&quot;</span></span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a>  <span class="ex">},</span></span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;devDependencies&quot;</span><span class="ex">:</span> {</span>
<span id="cb83-7"><a href="#cb83-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;gh-pages&quot;</span><span class="ex">:</span> <span class="st">&quot;^6.0.0&quot;</span></span>
<span id="cb83-8"><a href="#cb83-8" aria-hidden="true" tabindex="-1"></a>  <span class="kw">}</span></span>
<span id="cb83-9"><a href="#cb83-9" aria-hidden="true" tabindex="-1"></a><span class="er">}</span></span>
<span id="cb83-10"><a href="#cb83-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-11"><a href="#cb83-11" aria-hidden="true" tabindex="-1"></a><span class="co"># vite.config.ts</span></span>
<span id="cb83-12"><a href="#cb83-12" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">default</span> {</span>
<span id="cb83-13"><a href="#cb83-13" aria-hidden="true" tabindex="-1"></a>  <span class="ex">base:</span> <span class="st">&#39;/ai-bookmarks/&#39;</span>,  // Nom del repo</span>
<span id="cb83-14"><a href="#cb83-14" aria-hidden="true" tabindex="-1"></a>  <span class="ex">...</span></span>
<span id="cb83-15"><a href="#cb83-15" aria-hidden="true" tabindex="-1"></a><span class="er">}</span></span>
<span id="cb83-16"><a href="#cb83-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-17"><a href="#cb83-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Deploy</span></span>
<span id="cb83-18"><a href="#cb83-18" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run deploy</span></code></pre></div>
<h3 id="deployment-backend">Deployment Backend</h3>
<p><strong>Ja cobert a secciÃ³ â€œConfiguraciÃ³ del Servidor
VPSâ€</strong></p>
<p>Resum: 1. VPS amb Node.js instalÂ·lat 2. Pujar server.js, package.json
3. <code>npm install</code> 4.
<code>pm2 start server.js --name ai-bookmarks</code> 5. Configurar
firewall (port 3002) 6. (Opcional) Nginx reverse proxy</p>
<h3 id="variables-dentorn-per-producciÃ³">Variables dâ€™Entorn per
ProducciÃ³</h3>
<p><strong>Frontend (.env.production):</strong></p>
<pre class="env"><code>VITE_API_KEY=&lt;production-gemini-key&gt;
VITE_STORAGE_API_URL=https://api.bookmarks.example.com
VITE_STORAGE_SECRET=&lt;strong-random-secret&gt;</code></pre>
<p><strong>Backend (server.js):</strong></p>
<div class="sourceCode" id="cb85"><pre
class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> API_SECRET <span class="op">=</span> <span class="bu">process</span><span class="op">.</span><span class="at">env</span><span class="op">.</span><span class="at">API_SECRET</span> <span class="op">||</span> <span class="st">&#39;default-secret&#39;</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> PORT <span class="op">=</span> <span class="bu">process</span><span class="op">.</span><span class="at">env</span><span class="op">.</span><span class="at">PORT</span> <span class="op">||</span> <span class="dv">3002</span></span></code></pre></div>
<p><strong>Recomanacions:</strong> - âœ… Usar HTTPS en producciÃ³ - âœ…
Secrets forts (min 32 chars random) - âœ… API keys diferents per dev/prod
- âœ… Rate limiting al servidor - âœ… Backups automÃ tics de db.json</p>
<h3 id="cicd-opcional">CI/CD (Opcional)</h3>
<p><strong>GitHub Actions (.github/workflows/deploy.yml):</strong></p>
<div class="sourceCode" id="cb86"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">name</span><span class="kw">:</span><span class="at"> Deploy Frontend</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a><span class="fu">on</span><span class="kw">:</span></span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">push</span><span class="kw">:</span></span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">branches</span><span class="kw">:</span><span class="at"> </span><span class="kw">[</span><span class="at">main</span><span class="kw">]</span></span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a><span class="fu">jobs</span><span class="kw">:</span></span>
<span id="cb86-8"><a href="#cb86-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">deploy</span><span class="kw">:</span></span>
<span id="cb86-9"><a href="#cb86-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">runs-on</span><span class="kw">:</span><span class="at"> ubuntu-latest</span></span>
<span id="cb86-10"><a href="#cb86-10" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">steps</span><span class="kw">:</span></span>
<span id="cb86-11"><a href="#cb86-11" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/checkout@v3</span></span>
<span id="cb86-12"><a href="#cb86-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-13"><a href="#cb86-13" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Setup Node.js</span></span>
<span id="cb86-14"><a href="#cb86-14" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/setup-node@v3</span></span>
<span id="cb86-15"><a href="#cb86-15" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb86-16"><a href="#cb86-16" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">node-version</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;20&#39;</span></span>
<span id="cb86-17"><a href="#cb86-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-18"><a href="#cb86-18" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Install dependencies</span></span>
<span id="cb86-19"><a href="#cb86-19" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">run</span><span class="kw">:</span><span class="at"> npm ci</span></span>
<span id="cb86-20"><a href="#cb86-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-21"><a href="#cb86-21" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Build</span></span>
<span id="cb86-22"><a href="#cb86-22" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">env</span><span class="kw">:</span></span>
<span id="cb86-23"><a href="#cb86-23" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">VITE_API_KEY</span><span class="kw">:</span><span class="at"> ${{ secrets.VITE_API_KEY }}</span></span>
<span id="cb86-24"><a href="#cb86-24" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">VITE_STORAGE_API_URL</span><span class="kw">:</span><span class="at"> ${{ secrets.VITE_STORAGE_API_URL }}</span></span>
<span id="cb86-25"><a href="#cb86-25" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">VITE_STORAGE_SECRET</span><span class="kw">:</span><span class="at"> ${{ secrets.VITE_STORAGE_SECRET }}</span></span>
<span id="cb86-26"><a href="#cb86-26" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">run</span><span class="kw">:</span><span class="at"> npm run build</span></span>
<span id="cb86-27"><a href="#cb86-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-28"><a href="#cb86-28" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Deploy to Vercel</span></span>
<span id="cb86-29"><a href="#cb86-29" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> amondnet/vercel-action@v25</span></span>
<span id="cb86-30"><a href="#cb86-30" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb86-31"><a href="#cb86-31" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">vercel-token</span><span class="kw">:</span><span class="at"> ${{ secrets.VERCEL_TOKEN }}</span></span>
<span id="cb86-32"><a href="#cb86-32" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">vercel-org-id</span><span class="kw">:</span><span class="at"> ${{ secrets.ORG_ID }}</span></span>
<span id="cb86-33"><a href="#cb86-33" aria-hidden="true" tabindex="-1"></a><span class="at">          </span><span class="fu">vercel-project-id</span><span class="kw">:</span><span class="at"> ${{ secrets.PROJECT_ID }}</span></span></code></pre></div>
<hr />
<h2 id="conclusions-i-recomanacions">Conclusions i Recomanacions</h2>
<h3 id="punts-forts-del-projecte">Punts Forts del Projecte</h3>
<ol type="1">
<li><strong>Arquitectura Modular:</strong>
<ul>
<li>SeparaciÃ³ clara entre UI, serveis i lÃ²gica de negoci</li>
<li>Components reutilitzables ben dissenyats</li>
<li>FÃ cil dâ€™estendre i mantenir</li>
</ul></li>
<li><strong>IntegraciÃ³ IA Robusta:</strong>
<ul>
<li>Rate limiting intelÂ·ligent preveu errors</li>
<li>Retry amb exponential backoff</li>
<li>Logging detallat per debugging</li>
</ul></li>
<li><strong>Storage Flexible:</strong>
<ul>
<li>Funciona offline (localStorage)</li>
<li>SincronitzaciÃ³ multi-dispositiu (API)</li>
<li>Canvi transparent segons configuraciÃ³</li>
</ul></li>
<li><strong>ExperiÃ¨ncia dâ€™Usuari:</strong>
<ul>
<li>Disseny brutalista distintiu i modern</li>
<li>Progress tracking en temps real</li>
<li>Responsive design mÃ²bil-friendly</li>
<li>Sistema de backup/restore complet</li>
</ul></li>
<li><strong>Integritat de Dades:</strong>
<ul>
<li>DeduplicaciÃ³ automÃ tica</li>
<li>Blacklist dâ€™eliminats prevÃ© reimportacions</li>
<li>ValidaciÃ³ TypeScript prevÃ© errors</li>
</ul></li>
</ol>
<h3 id="possibles-millores-futures">Possibles Millores Futures</h3>
<h4 id="curts-termini">Curts Termini</h4>
<ol type="1">
<li><strong>Seguretat:</strong>
<ul>
<li>Migrar a HTTPS</li>
<li>Implementar autenticaciÃ³ JWT</li>
<li>Rate limiting per IP al backend</li>
<li>SanititzaciÃ³ dâ€™inputs</li>
</ul></li>
<li><strong>UX:</strong>
<ul>
<li>Cerca per text (tÃ­tol/descripciÃ³)</li>
<li>OrdenaciÃ³ (data, autor, categoria)</li>
<li>Vista compacta/expandida</li>
<li>Dark mode</li>
</ul></li>
<li><strong>Rendiment:</strong>
<ul>
<li>Lazy loading dâ€™imatges</li>
<li>VirtualitzaciÃ³ per llistes llargues (&gt;1000 items)</li>
<li>Service Worker per cache offline</li>
<li>CompressiÃ³ dâ€™imatges</li>
</ul></li>
<li><strong>Funcionalitats:</strong>
<ul>
<li>EdiciÃ³ inline de tÃ­tols</li>
<li>AssignaciÃ³ manual de categoria</li>
<li>Tags personalitzats</li>
<li>Notes privades per bookmark</li>
</ul></li>
</ol>
<h4 id="llarg-termini">Llarg Termini</h4>
<ol type="1">
<li><strong>Escalabilitat:</strong>
<ul>
<li>Migrar a base de dades real (PostgreSQL, MongoDB)</li>
<li>Pagination/infinite scroll</li>
<li>Full-text search (Elasticsearch)</li>
<li>CDN per assets</li>
</ul></li>
<li><strong>ColÂ·laboraciÃ³:</strong>
<ul>
<li>ComparticiÃ³ de colÂ·leccions</li>
<li>Bookmarks pÃºblics/privats</li>
<li>Sistema de â€œmâ€™agradaâ€ o favorits</li>
</ul></li>
<li><strong>Analytics:</strong>
<ul>
<li>Dashboard dâ€™estadÃ­stiques</li>
<li>TendÃ¨ncies de categories</li>
<li>Timeline dâ€™imports</li>
</ul></li>
<li><strong>Integracions:</strong>
<ul>
<li>Sync automÃ tic amb Twitter API</li>
<li>Export a Notion, Obsidian, etc.</li>
<li>Chrome extension per afegir bookmarks</li>
<li>Mobile app (React Native)</li>
</ul></li>
<li><strong>IA AvanÃ§ada:</strong>
<ul>
<li>Resums automÃ tics de threads</li>
<li>Recomanacions personalitzades</li>
<li>Clustering automÃ tic de temes</li>
<li>ExtracciÃ³ dâ€™entitats (persones, empreses, conceptes)</li>
</ul></li>
</ol>
<h3 id="limitacions-actuals">Limitacions Actuals</h3>
<ol type="1">
<li><strong>Seguretat BÃ sica:</strong>
<ul>
<li>HTTP en lloc de HTTPS</li>
<li>Secret compartit simple</li>
<li>Sense gestiÃ³ dâ€™usuaris</li>
</ul></li>
<li><strong>Race Conditions:</strong>
<ul>
<li>Last-write-wins en updates simultanis</li>
<li>No hi ha versionat o merge automÃ tic</li>
</ul></li>
<li><strong>Limits de Gemini:</strong>
<ul>
<li>15 RPM en free tier (lent per imports grans)</li>
<li>Pot requerir API key de pagament per Ãºs intens</li>
</ul></li>
<li><strong>Storage Limitat:</strong>
<ul>
<li>LocalStorage: ~10MB max</li>
<li>db.json pot crÃ©ixer indefinidament</li>
<li>No hi ha garbage collection de deletedIds</li>
</ul></li>
<li><strong>Offline Support:</strong>
<ul>
<li>Mode API requereix internet sempre</li>
<li>No hi ha sync automÃ tic quan torna connexiÃ³</li>
</ul></li>
</ol>
<h3 id="recomanacions-dÃºs">Recomanacions dâ€™Ãšs</h3>
<ol type="1">
<li><strong>Imports Grans:</strong>
<ul>
<li>Dividir fitxers JSON en batches de &lt;100 tweets</li>
<li>Executar imports fora dâ€™hores punta (Gemini rate limits)</li>
</ul></li>
<li><strong>Backups:</strong>
<ul>
<li>Exportar backup setmanalment</li>
<li>Guardar backups en mÃºltiples llocs (Drive, Dropbox)</li>
<li>Verificar integritat desprÃ©s dâ€™imports grans</li>
</ul></li>
<li><strong>Manteniment VPS:</strong>
<ul>
<li>Backups diaris de db.json (cron job)</li>
<li>Monitoritzar Ãºs de disc</li>
<li>Revisar logs de PM2 regularment</li>
</ul></li>
<li><strong>OptimitzaciÃ³:</strong>
<ul>
<li>Eliminar tweets obsolets ocasionalment</li>
<li>Consolidar categories similars</li>
<li>Revisar i actualitzar tÃ­tols generats per IA</li>
</ul></li>
</ol>
<hr />
<h2 id="contacte-i-suport">Contacte i Suport</h2>
<p><strong>Autor:</strong> Roger Masellas <strong>Projecte:</strong> AI
Bookmark Manager <strong>Repositori:</strong>
https://github.com/rogeraclaro/AI-Bookmark-Manager <strong>Data
DocumentaciÃ³:</strong> 4 de Desembre de 2025</p>
<hr />
<h2 id="llicÃ¨ncia">LlicÃ¨ncia</h2>
<p>Aquest projecte Ã©s dâ€™Ãºs personal. Tots els drets reservats.</p>
<hr />
<h2 id="apÃ¨ndix">ApÃ¨ndix</h2>
<h3 id="a.-glossari-de-termes">A. Glossari de Termes</h3>
<ul>
<li><strong>Bookmark:</strong> Preferit o marcador de Twitter guardat
per lâ€™usuari</li>
<li><strong>RAG:</strong> Retrieval Augmented Generation, tÃ¨cnica dâ€™IA
per millorar respostes amb context extern</li>
<li><strong>Brutalisme:</strong> Estil de disseny minimalista amb
elements visuals crus i funcionals</li>
<li><strong>Rate Limiting:</strong> LimitaciÃ³ de peticions per unitat de
temps</li>
<li><strong>Exponential Backoff:</strong> EstratÃ¨gia de retry amb
esperes progressivament mÃ©s llargues</li>
<li><strong>Blacklist:</strong> Llista dâ€™elements prohibits o
exclosos</li>
<li><strong>VPS:</strong> Virtual Private Server, servidor virtual
privat</li>
<li><strong>CORS:</strong> Cross-Origin Resource Sharing, mecanisme de
seguretat per requests entre dominis</li>
<li><strong>JWT:</strong> JSON Web Token, estÃ ndard dâ€™autenticaciÃ³</li>
<li><strong>ETL:</strong> Extract, Transform, Load, procÃ©s de
transformaciÃ³ de dades</li>
</ul>
<h3 id="b.-comandes-rÃ pides">B. Comandes RÃ pides</h3>
<div class="sourceCode" id="cb87"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Frontend</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> install          <span class="co"># InstalÂ·lar dependÃ¨ncies</span></span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run dev          <span class="co"># Dev server (localhost:3000)</span></span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run build        <span class="co"># Build producciÃ³ â†’ dist/</span></span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run preview      <span class="co"># Preview build local</span></span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a><span class="ex">npm</span> run lint         <span class="co"># Verificar codi</span></span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-8"><a href="#cb87-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Backend (VPS)</span></span>
<span id="cb87-9"><a href="#cb87-9" aria-hidden="true" tabindex="-1"></a><span class="ex">pm2</span> start server.js <span class="at">--name</span> ai-bookmarks  <span class="co"># Iniciar servidor</span></span>
<span id="cb87-10"><a href="#cb87-10" aria-hidden="true" tabindex="-1"></a><span class="ex">pm2</span> logs ai-bookmarks                    <span class="co"># Veure logs</span></span>
<span id="cb87-11"><a href="#cb87-11" aria-hidden="true" tabindex="-1"></a><span class="ex">pm2</span> restart ai-bookmarks                 <span class="co"># Reiniciar</span></span>
<span id="cb87-12"><a href="#cb87-12" aria-hidden="true" tabindex="-1"></a><span class="ex">pm2</span> stop ai-bookmarks                    <span class="co"># Aturar</span></span>
<span id="cb87-13"><a href="#cb87-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-14"><a href="#cb87-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Backup (VPS)</span></span>
<span id="cb87-15"><a href="#cb87-15" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> db.json db.json.backup-<span class="va">$(</span><span class="fu">date</span> +%Y%m%d<span class="va">)</span>  <span class="co"># Backup manual</span></span></code></pre></div>
<h3 id="c.-endpoints-api-reference">C. Endpoints API Reference</h3>
<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 11%" />
<col style="width: 29%" />
<col style="width: 30%" />
<col style="width: 8%" />
</colgroup>
<thead>
<tr>
<th>Endpoint</th>
<th>MÃ¨tode</th>
<th>Body</th>
<th>Response</th>
<th>Auth</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>/bookmarks</code></td>
<td>GET</td>
<td>-</td>
<td><code>{data: Bookmark[]}</code></td>
<td>âœ“</td>
</tr>
<tr>
<td><code>/bookmarks</code></td>
<td>POST</td>
<td><code>{data: Bookmark[]}</code></td>
<td><code>{success: true}</code></td>
<td>âœ“</td>
</tr>
<tr>
<td><code>/categories</code></td>
<td>GET</td>
<td>-</td>
<td><code>{data: string[]}</code></td>
<td>âœ“</td>
</tr>
<tr>
<td><code>/categories</code></td>
<td>POST</td>
<td><code>{data: string[]}</code></td>
<td><code>{success: true}</code></td>
<td>âœ“</td>
</tr>
<tr>
<td><code>/deleted</code></td>
<td>GET</td>
<td>-</td>
<td><code>{data: string[]}</code></td>
<td>âœ“</td>
</tr>
<tr>
<td><code>/deleted</code></td>
<td>POST</td>
<td><code>{data: string[]}</code></td>
<td><code>{success: true}</code></td>
<td>âœ“</td>
</tr>
<tr>
<td><code>/reset</code></td>
<td>POST</td>
<td>-</td>
<td><code>{success: true}</code></td>
<td>âœ“</td>
</tr>
</tbody>
</table>
<p><strong>Auth Header Required:</strong></p>
<pre><code>x-api-secret: aAgYYud97Kp29Lif9u0i</code></pre>
<h3 id="d.-troubleshooting-comÃº">D. Troubleshooting ComÃº</h3>
<p><strong>1. Error â€œFailed to fetchâ€ al carregar:</strong> - Verificar
que el servidor VPS estÃ  actiu: <code>pm2 status</code> - Verificar
firewall permet port 3002: <code>sudo ufw status</code> - Comprovar
VITE_STORAGE_API_URL al .env</p>
<p><strong>2. Gemini API error 429:</strong> - Esperar uns minuts (rate
limit temporal) - Reduir velocitat dâ€™imports (augmentar BASE_DELAY) -
Considerar upgrade a tier de pagament</p>
<p><strong>3. LocalStorage quota exceeded:</strong> - Exportar backup i
eliminar bookmarks antics - Activar mode API per storage ilÂ·limitat -
Netejar dades del navegador i reimportar backup</p>
<p><strong>4. Tweets duplicats desprÃ©s dâ€™eliminar:</strong> - Verificar
que deletedIds es guarda correctament - Comprovar que lâ€™ID del tweet Ã©s
correcte - Revisar logs del procÃ©s dâ€™import</p>
<p><strong>5. Servidor VPS no respon:</strong> - SSH al VPS i verificar
<code>pm2 status</code> - Revisar logs:
<code>pm2 logs ai-bookmarks --lines 50</code> - Reiniciar si cal:
<code>pm2 restart ai-bookmarks</code> - Verificar espai en disc:
<code>df -h</code></p>
<hr />
<p><strong>Fi de la DocumentaciÃ³</strong></p>
<p>Aquesta documentaciÃ³ cobreix tots els aspectes tÃ¨cnics i funcionals
de lâ€™AI Bookmark Manager. Per qualsevol dubte o millora, consultar el
repositori de GitHub o contactar amb lâ€™autor.</p>
</body></html>
